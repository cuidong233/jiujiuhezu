import{f as k,r,h as y,c as _,a as s,K as h,j as b,v as f,d as $,n as p,t as g,o as m,_ as C,D as I,u as N,k as X,O as x,g as V,H as M,m as S,b as B,i as U,S as E}from"./EcDhdyxl.js";const z={class:"modal-mask"},P={class:"change-password-modal"},A={class:"modal-header-center"},Z={class:"form-group"},D={class:"form-group"},K={class:"password-strength"},T={class:"password-rules"},O={class:"form-group"},j={class:"modal-actions"},H=["disabled"],J=k({__name:"ChangePasswordModal",setup(w){const i=r(""),o=r(""),d=r(""),n=r(0),v=()=>{let l=0;o.value.length>=8&&l++,/\d/.test(o.value)&&l++,/[a-zA-Z]/.test(o.value)&&l++,/[^a-zA-Z0-9]/.test(o.value)&&l++,n.value=l},u=y(()=>{const l=["弱","弱","中","强","很强"];return l[n.value>=0&&n.value<l.length?n.value:0]}),a=y(()=>{const l=["weak","weak","medium","strong","very-strong"];return l[n.value>=0&&n.value<l.length?n.value:0]}),e=y(()=>i.value&&o.value.length>=8&&/\d/.test(o.value)&&/[a-zA-Z]/.test(o.value)&&d.value===o.value);return(l,t)=>(m(),_("div",z,[s("div",P,[s("div",A,[t[6]||(t[6]=s("span",{class:"modal-title"},"账户安全中心",-1)),t[7]||(t[7]=s("div",{class:"modal-title-underline"},null,-1)),t[8]||(t[8]=s("div",{class:"modal-subtitle"},"管理您的账户安全设置",-1)),s("button",{class:"modal-close",onClick:t[0]||(t[0]=c=>l.$emit("close"))},"×")]),s("form",{class:"modal-form",onSubmit:t[5]||(t[5]=h(()=>{},["prevent"]))},[s("div",Z,[t[9]||(t[9]=s("label",{class:"form-label"},"当前密码",-1)),b(s("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=c=>i.value=c),class:"form-input",placeholder:"请输入当前密码"},null,512),[[f,i.value]])]),s("div",D,[t[10]||(t[10]=s("label",{class:"form-label"},"新密码",-1)),b(s("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=c=>o.value=c),class:"form-input",placeholder:"请输入新密码",onInput:v},null,544),[[f,o.value]])]),s("div",K,[t[11]||(t[11]=$(" 密码强度：")),s("span",{class:p(a.value)},g(u.value),3)]),s("ul",T,[s("li",{class:p({passed:o.value.length>=8})},"至少8个字符",2),s("li",{class:p({passed:/\d/.test(o.value)})},"包含数字",2),s("li",{class:p({passed:/[a-zA-Z]/.test(o.value)})},"包含字母",2),s("li",{class:p({passed:/[^a-zA-Z0-9]/.test(o.value)})},"包含特殊字符（可选）",2)]),s("div",O,[t[12]||(t[12]=s("label",{class:"form-label"},"确认新密码",-1)),b(s("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=c=>d.value=c),class:"form-input",placeholder:"请再次输入新密码"},null,512),[[f,d.value]])]),s("div",j,[s("button",{type:"button",class:"btn-cancel",onClick:t[4]||(t[4]=c=>l.$emit("close"))},"取消"),s("button",{type:"submit",class:"btn-confirm",disabled:!e.value},"更改密码",8,H)])],32)])]))}}),L=C(J,[["__scopeId","data-v-987f6635"]]),q={class:"modal-mask"},F={class:"bind-email-modal"},G={class:"modal-header"},Q={class:"modal-content"},R={class:"email-box"},W=["disabled"],Y={class:"form-group"},ss={class:"code-tip"},es={class:"code-time"},as={class:"modal-actions"},ts=["disabled"],ls=k({__name:"BindEmailModal",setup(w){const i=r(""),o=r(0),d=r(null),n=r("05:00");function v(){if(o.value>0)return;o.value=60;let u=300;n.value="05:00",clearInterval(d.value),d.value=I(()=>{o.value>0&&o.value--,u>0&&u--;const a=String(Math.floor(u/60)).padStart(2,"0"),e=String(u%60).padStart(2,"0");n.value=`${a}:${e}`,u<=0&&clearInterval(d.value)},1e3)}return(u,a)=>(m(),_("div",q,[s("div",F,[s("div",G,[a[3]||(a[3]=s("div",{class:"modal-title"},"绑定邮箱",-1)),a[4]||(a[4]=s("div",{class:"modal-subtitle"},"验证邮箱地址以完成绑定",-1)),s("button",{class:"modal-close",onClick:a[0]||(a[0]=e=>u.$emit("close"))},"×")]),s("div",Q,[s("div",R,[a[5]||(a[5]=s("div",{class:"email-label"},"当前绑定邮箱",-1)),a[6]||(a[6]=s("div",{class:"email-value"},"user@example.com",-1)),s("button",{class:"btn-send",disabled:o.value>0,onClick:v},g(o.value>0?`${o.value}s后可重发`:"发送验证码"),9,W)]),s("div",Y,[a[8]||(a[8]=s("label",{class:"form-label"},"请输入验证码",-1)),b(s("input",{class:"form-input","onUpdate:modelValue":a[1]||(a[1]=e=>i.value=e),maxlength:"6",placeholder:"6位验证码"},null,512),[[f,i.value]]),s("div",ss,[a[7]||(a[7]=$(" 验证码已发送至邮箱，有效时间：")),s("span",es,g(n.value),1)])]),s("div",as,[s("button",{class:"btn-cancel",onClick:a[2]||(a[2]=e=>u.$emit("close"))},"取消"),s("button",{class:"btn-confirm",disabled:!i.value||i.value.length!==6},"确认绑定",8,ts)]),s("div",{class:"modal-footer-tip"},[a[9]||(a[9]=$(" 未收到验证码？请检查垃圾邮件或 ")),s("span",{class:"resend-link",onClick:v},"重新发送"),a[10]||(a[10]=s("br",null,null,-1)),a[11]||(a[11]=$(" 绑定邮箱可用于找回密码和接收重要通知 "))])])])]))}}),os=C(ls,[["__scopeId","data-v-a492a0bc"]]),ns={class:"modal-container"},is={class:"modal-header"},ds={class:"modal-body"},us={class:"form-group"},rs={class:"modal-footer"},vs=["disabled"],cs=k({__name:"ChangeNicknameModal",emits:["close"],setup(w,{emit:i}){var a;const o=i,d=N(),n=r(((a=d.user)==null?void 0:a.nickname)||""),v=r(!1),u=async()=>{if(!(!n.value||v.value)){v.value=!0;try{const e=await x.put("/user/profile",{nickname:n.value});e.code===0?(d.user&&(d.user.nickname=n.value,localStorage.setItem("user",JSON.stringify(d.user))),ElMessage.success("昵称更新成功"),o("close")):ElMessage.error(e.msg||"更新失败")}catch(e){ElMessage.error(e.message||"更新失败")}finally{v.value=!1}}};return(e,l)=>(m(),_("div",{class:"modal-overlay",onClick:l[3]||(l[3]=h(t=>e.$emit("close"),["self"]))},[s("div",ns,[s("div",is,[l[4]||(l[4]=s("h3",{class:"modal-title"},"更改昵称",-1)),s("button",{class:"modal-close",onClick:l[0]||(l[0]=t=>e.$emit("close"))},"×")]),s("div",ds,[s("div",us,[l[5]||(l[5]=s("label",{class:"form-label"},"新昵称",-1)),b(s("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>n.value=t),type:"text",class:"form-input",placeholder:"请输入新昵称",maxlength:"20",onKeyup:X(u,["enter"])},null,544),[[f,n.value]]),l[6]||(l[6]=s("p",{class:"form-hint"},"昵称长度不超过20个字符",-1))])]),s("div",rs,[s("button",{class:"btn-cancel",onClick:l[2]||(l[2]=t=>e.$emit("close"))},"取消"),s("button",{class:"btn-confirm",onClick:u,disabled:!n.value||v.value},g(v.value?"保存中...":"确定"),9,vs)])])]))}}),ms=C(cs,[["__scopeId","data-v-8ba279ac"]]),ps={class:"info-section"},bs={class:"section-header"},fs={class:"header-actions"},gs={class:"info-content"},$s={class:"info-field"},ks={class:"avatar-info"},_s=["src"],Cs={class:"avatar-name"},ws={class:"info-field"},ys={class:"input-container"},Ms=["value"],Ss={class:"info-field"},hs={class:"input-container"},xs=["value"],Is=k({__name:"index",setup(w){const i=r({}),o=r(!1),d=r(!1),n=r(!1),v=async()=>{const a=await x.get("/user/info");a&&a.data&&(i.value=a.data)},u=()=>{n.value=!1,v()};return V(v),(a,e)=>{const l=E("NotificationBell");return m(),_("div",ps,[s("div",bs,[e[5]||(e[5]=s("h2",{class:"section-title"},"个人信息",-1)),s("div",fs,[B(l),s("button",{class:"change-password-btn",onClick:e[0]||(e[0]=t=>o.value=!0)},"更改密码")])]),s("div",gs,[s("div",$s,[e[6]||(e[6]=s("label",{class:"field-label"},"头像",-1)),s("div",ks,[s("img",{src:i.value.avatar||"/images/head1.png",alt:"头像",class:"info-avatar"},null,8,_s),s("span",Cs,g(i.value.nickname||"张小明"),1),s("button",{class:"change-nickname-btn",onClick:e[1]||(e[1]=t=>n.value=!0)},"更改昵称")])]),s("div",ws,[e[7]||(e[7]=s("label",{class:"field-label"},"UID",-1)),s("div",ys,[s("input",{type:"text",class:"info-input",value:i.value.id||"87654321",readonly:""},null,8,Ms)])]),s("div",Ss,[e[8]||(e[8]=s("label",{class:"field-label"},"绑定邮箱",-1)),s("div",hs,[s("input",{type:"email",class:"info-input",value:i.value.email||"user@example.com",readonly:""},null,8,xs),s("button",{class:"bind-email-btn",onClick:e[2]||(e[2]=t=>d.value=!0)},"绑定邮箱")])]),e[9]||(e[9]=U('<div class="info-field" data-v-19bec5da><label class="field-label" data-v-19bec5da>绑定社交媒体</label><div class="input-container" data-v-19bec5da><div class="social-items" data-v-19bec5da><span class="social-tag" data-v-19bec5da>已绑定微信：XXXX</span><span class="social-tag" data-v-19bec5da>已绑定微信：XXXX</span><span class="social-tag" data-v-19bec5da>已绑定微信：XXXX</span></div><button class="change-binding-btn" data-v-19bec5da>更改绑定</button></div></div><div class="danger-section" data-v-19bec5da><div class="danger-content" data-v-19bec5da><button class="delete-account-btn" data-v-19bec5da>注销账号</button><p class="warning-text" data-v-19bec5da><i class="warning-icon" data-v-19bec5da>⚠</i> 一旦注销无法恢复 </p></div></div>',2))]),o.value?(m(),M(L,{key:0,onClose:e[3]||(e[3]=t=>o.value=!1)})):S("",!0),d.value?(m(),M(os,{key:1,onClose:e[4]||(e[4]=t=>d.value=!1)})):S("",!0),n.value?(m(),M(ms,{key:2,onClose:u})):S("",!0)])}}}),Xs=C(Is,[["__scopeId","data-v-19bec5da"]]);export{Xs as default};
