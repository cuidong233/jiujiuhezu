import{a6 as ge,a7 as $e,a8 as ce,a9 as te,aa as Ce,ab as ue,ac as xe,ad as pe,Y as he,h as E,f as H,ae as Se,r as C,g as ye,c as p,af as Ie,o as f,ag as Y,z as W,ah as qe,m as z,H as P,I as Le,a as t,i as we,n as J,_ as D,K as G,d as _,u as oe,A as Me,B as ie,S as ze,j as K,v as se,t as $,F as R,ai as Ee,b as q,y as Te,w as N,e as ae,O as j,D as Ne,G as Ue,W as Ae,s as We,C as je,l as X,N as Be,M as Pe}from"./EcDhdyxl.js";import{_ as Ge}from"./Dw_Z4xcU.js";async function Oe(s,e){return await Re(e).catch(i=>(console.error("Failed to get image meta for "+e,i+""),{width:0,height:0,ratio:0}))}async function Re(s){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,o)=>{const i=new Image;i.onload=()=>{const a={width:i.width,height:i.height,ratio:i.width/i.height};e(a)},i.onerror=a=>o(a),i.src=s})}function ve(s){return e=>e?s[e]||e:s.missingValue}function He({formatter:s,keyMap:e,joinWith:o="/",valueMap:i}={}){s||(s=(u,n)=>`${u}=${n}`),e&&typeof e!="function"&&(e=ve(e));const a=i||{};return Object.keys(a).forEach(u=>{typeof a[u]!="function"&&(a[u]=ve(a[u]))}),(u={})=>Object.entries(u).filter(([r,g])=>typeof g<"u").map(([r,g])=>{const l=a[r];return typeof l=="function"&&(g=l(u[r])),r=typeof e=="function"?e(r):r,s(r,g)}).join(o)}function O(s=""){if(typeof s=="number")return s;if(typeof s=="string"&&s.replace("px","").match(/^\d+$/g))return Number.parseInt(s,10)}function De(s=""){if(s===void 0||!s.length)return[];const e=new Set;for(const o of s.split(" ")){const i=Number.parseInt(o.replace("x",""));i&&e.add(i)}return Array.from(e)}function Ve(s){if(s.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function Fe(s){const e={};if(typeof s=="string")for(const o of s.split(/[\s,]+/).filter(i=>i)){const i=o.split(":");i.length!==2?e["1px"]=i[0].trim():e[i[0].trim()]=i[1].trim()}else Object.assign(e,s);return e}function Je(s){const e={options:s},o=(a,u={})=>ke(e,a,u),i=(a,u={},n={})=>o(a,{...n,modifiers:ge(u,n.modifiers||{})}).url;for(const a in s.presets)i[a]=(u,n,r)=>i(u,n,{...s.presets[a],...r});return i.options=s,i.getImage=o,i.getMeta=(a,u)=>Ke(e,a,u),i.getSizes=(a,u)=>Qe(e,a,u),e.$img=i,i}async function Ke(s,e,o){const i=ke(s,e,{...o});return typeof i.getMeta=="function"?await i.getMeta():await Oe(s,i.url)}function ke(s,e,o){var l,d;if(e&&typeof e!="string")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(!e||e.startsWith("data:"))return{url:e};const{provider:i,defaults:a}=Xe(s,o.provider||s.options.provider),u=Ye(s,o.preset);if(e=ce(e)?e:$e(e),!i.supportsAlias){for(const k in s.options.alias)if(e.startsWith(k)){const c=s.options.alias[k];c&&(e=te(c,e.slice(k.length)))}}if(i.validateDomains&&ce(e)){const k=Ce(e).host;if(!s.options.domains.find(c=>c===k))return{url:e}}const n=ge(o,u,a);n.modifiers={...n.modifiers};const r=n.modifiers.format;(l=n.modifiers)!=null&&l.width&&(n.modifiers.width=O(n.modifiers.width)),(d=n.modifiers)!=null&&d.height&&(n.modifiers.height=O(n.modifiers.height));const g=i.getImage(e,n,s);return g.format=g.format||r||"",g}function Xe(s,e){const o=s.options.providers[e];if(!o)throw new Error("Unknown provider: "+e);return o}function Ye(s,e){if(!e)return{};if(!s.options.presets[e])throw new Error("Unknown preset: "+e);return s.options.presets[e]}function Qe(s,e,o){var x,y,U,w,S;const i=O((x=o.modifiers)==null?void 0:x.width),a=O((y=o.modifiers)==null?void 0:y.height),u=Fe(o.sizes),n=(U=o.densities)!=null&&U.trim()?De(o.densities.trim()):s.options.densities;Ve(n);const r=i&&a?a/i:0,g=[],l=[];if(Object.keys(u).length>=1){for(const L in u){const I=fe(L,String(u[L]),a,r,s);if(I!==void 0){g.push({size:I.size,screenMaxWidth:I.screenMaxWidth,media:`(max-width: ${I.screenMaxWidth}px)`});for(const B of n)l.push({width:I._cWidth*B,src:me(s,e,o,I,B)})}}Ze(g)}else for(const L of n){const I=Object.keys(u)[0];let B=I?fe(I,String(u[I]),a,r,s):void 0;B===void 0&&(B={size:"",screenMaxWidth:0,_cWidth:(w=o.modifiers)==null?void 0:w.width,_cHeight:(S=o.modifiers)==null?void 0:S.height}),l.push({width:L,src:me(s,e,o,B,L)})}et(l);const d=l[l.length-1],k=g.length?g.map(L=>`${L.media?L.media+" ":""}${L.size}`).join(", "):void 0,c=k?"w":"x",h=l.map(L=>`${L.src} ${L.width}${c}`).join(", ");return{sizes:k,srcset:h,src:d==null?void 0:d.src}}function fe(s,e,o,i,a){const u=a.options.screens&&a.options.screens[s]||Number.parseInt(s),n=e.endsWith("vw");if(!n&&/^\d+$/.test(e)&&(e=e+"px"),!n&&!e.endsWith("px"))return;let r=Number.parseInt(e);if(!u||!r)return;n&&(r=Math.round(r/100*u));const g=i?Math.round(r*i):o;return{size:e,screenMaxWidth:u,_cWidth:r,_cHeight:g}}function me(s,e,o,i,a){return s.$img(e,{...o.modifiers,width:i._cWidth?i._cWidth*a:void 0,height:i._cHeight?i._cHeight*a:void 0},o)}function Ze(s){var o;s.sort((i,a)=>i.screenMaxWidth-a.screenMaxWidth);let e=null;for(let i=s.length-1;i>=0;i--){const a=s[i];a.media===e&&s.splice(i,1),e=a.media}for(let i=0;i<s.length;i++)s[i].media=((o=s[i+1])==null?void 0:o.media)||""}function et(s){s.sort((o,i)=>o.width-i.width);let e=null;for(let o=s.length-1;o>=0;o--){const i=s[o];i.width===e&&s.splice(o,1),e=i.width}}const be=He({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(s,e)=>ue(s)+"_"+ue(e)}),tt=(s,{modifiers:e={},baseURL:o}={},i)=>{e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const a=be(e)||"_";return o||(o=te(i.options.nuxt.baseURL,"/_ipx")),{url:te(o,a,xe(s))}},st=!0,ot=!0,it=Object.freeze(Object.defineProperty({__proto__:null,getImage:tt,operationsGenerator:be,supportsAlias:ot,validateDomains:st},Symbol.toStringTag,{value:"Module"})),at={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{productMain:{modifiers:{format:"webp",quality:90,width:600,height:600}},productThumb:{modifiers:{format:"webp",quality:75,width:100,height:100}},avatar:{modifiers:{format:"webp",quality:80,width:64,height:64}},icon:{modifiers:{format:"webp",quality:85,width:48,height:48}}},provider:"ipx",domains:["fantula.com","via.placeholder.com"],alias:{"/fantula":"https://fantula.com"},densities:[1,2],format:["webp","avif","jpeg","webp"],quality:80,providers:{ipx:{provider:it,defaults:{}}}},_e=s=>{var i;const e=he(),o=pe();return o.$img||o._img||(o._img=Je({...at,event:(i=o.ssrContext)==null?void 0:i.event,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))};function rt(s){var e;(e=performance==null?void 0:performance.mark)==null||e.call(performance,"mark_feature_usage",{detail:{feature:s}})}const nt={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:s=>["lazy","eager"].includes(s)},crossorigin:{type:[Boolean,String],required:!1,validator:s=>["anonymous","use-credentials","",!0,!1].includes(s)},decoding:{type:String,required:!1,validator:s=>["async","auto","sync"].includes(s)},nonce:{type:[String],required:!1}},lt=s=>{const e=E(()=>({provider:s.provider,preset:s.preset})),o=E(()=>({width:O(s.width),height:O(s.height),alt:s.alt,referrerpolicy:s.referrerpolicy,usemap:s.usemap,longdesc:s.longdesc,ismap:s.ismap,crossorigin:s.crossorigin===!0?"anonymous":s.crossorigin||void 0,loading:s.loading,decoding:s.decoding,nonce:s.nonce})),i=_e(),a=E(()=>({...s.modifiers,width:O(s.width),height:O(s.height),format:s.format,quality:s.quality||i.options.quality,background:s.background,fit:s.fit}));return{options:e,attrs:o,modifiers:a}},dt={...nt,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1},custom:{type:Boolean,required:!1}},ct=["src"],ut=H({__name:"NuxtImg",props:dt,emits:["load","error"],setup(s,{emit:e}){const o=s,i=Se(),a=e,u=!1,n=_e(),r=lt(o),g=C(!1),l=C(),d=E(()=>n.getSizes(o.src,{...r.options.value,sizes:o.sizes,densities:o.densities,modifiers:{...r.modifiers.value,width:O(o.width),height:O(o.height)}})),k=E(()=>{const w={...r.attrs.value,"data-nuxt-img":""};return(!o.placeholder||g.value)&&(w.sizes=d.value.sizes,w.srcset=d.value.srcset),w}),c=E(()=>{let w=o.placeholder;if(w===""&&(w=!0),!w||g.value)return!1;if(typeof w=="string")return w;const S=Array.isArray(w)?w:typeof w=="number"?[w,w]:[10,10];return n(o.src,{...r.modifiers.value,width:S[0],height:S[1],quality:S[2]||50,blur:S[3]||3},r.options.value)}),h=E(()=>o.sizes?d.value.src:n(o.src,r.modifiers.value,r.options.value)),x=E(()=>c.value?c.value:h.value),U=pe().isHydrating;return ye(()=>{if(c.value||o.custom){const w=new Image;h.value&&(w.src=h.value),o.sizes&&(w.sizes=d.value.sizes||"",w.srcset=d.value.srcset),w.onload=S=>{g.value=!0,a("load",S)},w.onerror=S=>{a("error",S)},rt("nuxt-image");return}l.value&&(l.value.complete&&U&&(l.value.getAttribute("data-error")?a("error",new Event("error")):a("load",new Event("load"))),l.value.onload=w=>{a("load",w)},l.value.onerror=w=>{a("error",w)})}),(w,S)=>w.custom?Ie(w.$slots,"default",qe(Y({key:1},{...W(u)?{onerror:"this.setAttribute('data-error', 1)"}:{},imgAttrs:{...k.value,...W(i)},isLoaded:g.value,src:x.value}))):(f(),p("img",Y({key:0,ref_key:"imgEl",ref:l,class:c.value&&!g.value?w.placeholderClass:void 0},{...W(u)?{onerror:"this.setAttribute('data-error', 1)"}:{},...k.value,...W(i)},{src:x.value}),null,16,ct))}}),vt=["src","alt","title","loading","width","height"],ft={key:3,class:"image-error"},mt=H({__name:"OptimizedImage",props:{src:{},alt:{},title:{},width:{},height:{},loading:{default:"lazy"},preset:{},sizes:{},format:{default:"webp"},quality:{default:80},fit:{default:"cover"},modifiers:{},showPlaceholder:{type:Boolean,default:!0},placeholderSrc:{},imageClass:{},wrapperClass:{},seoKeywords:{},productName:{},category:{}},setup(s){const e=s,o=C(!1),i=C(!1),a=E(()=>e.src&&e.src.startsWith("/uploads/")),u=E(()=>a.value?`${he().public.apiBase}${e.src}`:e.src),n=E(()=>{var c;if(e.alt)return e.alt;if(e.productName){const h=[e.productName];return e.category&&h.push(e.category),(c=e.seoKeywords)!=null&&c.length&&h.push(...e.seoKeywords.slice(0,2)),h.push("高清图片"),h.join(" - ")}return"凡图拉平台图片"}),r=E(()=>{if(e.title)return e.title;if(n.value!=="凡图拉平台图片")return`查看${n.value}`}),g=E(()=>e.sizes?e.sizes:e.width&&typeof e.width=="number"?e.width<=400?"xs:100vw sm:50vw md:33vw":e.width<=800?"xs:100vw sm:75vw md:50vw lg:33vw":"xs:100vw sm:100vw md:75vw lg:50vw":"xs:100vw sm:100vw md:100vw"),l=E(()=>{const c={};if(e.width&&(c.width=typeof e.width=="number"?`${e.width}px`:e.width),e.height&&(c.height=typeof e.height=="number"?`${e.height}px`:e.height,e.width&&e.height)){const h=typeof e.width=="number"?e.width:parseInt(e.width),x=typeof e.height=="number"?e.height:parseInt(e.height);c.aspectRatio=`${h} / ${x}`}return c}),d=()=>{o.value=!0,i.value=!1},k=c=>{i.value=!0,o.value=!1,console.error("图片加载失败:",e.src,c)};return(c,h)=>{const x=ut;return f(),p("div",{class:J(["optimized-image-wrapper",c.wrapperClass])},[!o.value&&c.showPlaceholder?(f(),p("div",{key:0,class:"image-placeholder",style:Le(l.value)},h[0]||(h[0]=[t("div",{class:"placeholder-skeleton"},null,-1)]),4)):z("",!0),a.value?(f(),p("img",Y({key:1},c.$attrs,{src:u.value,alt:n.value,title:r.value,loading:c.loading,width:c.width,height:c.height,class:["optimized-image",c.imageClass,{"image-loading":!o.value}],onLoad:d,onError:k}),null,16,vt)):(f(),P(x,Y({key:2},c.$attrs,{src:c.src,alt:n.value,title:r.value,loading:c.loading,preset:c.preset,width:c.width,height:c.height,sizes:g.value,format:c.format,quality:c.quality,fit:c.fit,modifiers:c.modifiers,placeholder:c.placeholderSrc,class:["optimized-image",c.imageClass,{"image-loading":!o.value}],onLoad:d,onError:k}),null,16,["src","alt","title","loading","preset","width","height","sizes","format","quality","fit","modifiers","placeholder","class"])),i.value?(f(),p("div",ft,h[1]||(h[1]=[we('<svg class="error-icon" width="48" height="48" viewBox="0 0 24 24" fill="none" data-v-690363e1><path d="M4 6h16l-1.58 14.22A2 2 0 0116.432 22H7.568a2 2 0 01-1.988-1.78L4 6z" stroke="currentColor" stroke-width="2" data-v-690363e1></path><path d="M7.345 3.147A2 2 0 019.154 2h5.692a2 2 0 011.81 1.147L18 6H6l1.345-2.853z" stroke="currentColor" stroke-width="2" data-v-690363e1></path><path d="M10 11v5M14 11v5" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-690363e1></path></svg><span class="error-text" data-v-690363e1>图片加载失败</span>',2)]))):z("",!0)],2)}}}),gt=D(mt,[["__scopeId","data-v-690363e1"]]),pt={class:"service-modal"},ht={class:"modal-gradient-top"},yt={class:"modal-header"},wt={class:"modal-main-white"},kt={class:"modal-row"},bt={class:"modal-card"},_t={class:"card-top-row"},$t={class:"card-avatar wechat"},Ct={class:"card-icon-box"},xt={class:"modal-card"},St={class:"card-top-row"},It={class:"card-avatar dingtalk"},qt={class:"card-icon-box"},Lt={class:"modal-row phone-row"},Mt={class:"modal-card phone"},zt={class:"phone-header"},Et={class:"modal-card-icon phone"},Tt={class:"modal-action"},Nt="/images/kefuweixin1.png",Ut="/images/kefuweixin2.png",At="/images/kefudingding1.png",Wt="/images/kefudingding2.png",jt="/images/kefudianhua.png",Bt="/images/kefulianxi.png",Pt=H({__name:"ServiceModal",setup(s){const e=i=>{const a=i.target;console.warn("图片加载失败:",a.src),a.style.display="none"},o=i=>{const a=i.target;console.log("图片加载成功:",a.src)};return(i,a)=>(f(),p("div",{class:"service-modal-mask",onClick:a[1]||(a[1]=G(u=>i.$emit("close"),["self"]))},[t("div",pt,[t("div",ht,[t("div",yt,[a[2]||(a[2]=t("span",{class:"modal-title"},"联系客服",-1)),t("button",{class:"modal-close",onClick:a[0]||(a[0]=u=>i.$emit("close"))},"×")]),a[3]||(a[3]=t("div",{class:"modal-desc"},"我们提供多种便捷的客服渠道，7×24小时为您提供专业服务。扫码添加客服，获取即时帮助。",-1))]),t("div",wt,[t("div",kt,[t("div",bt,[t("div",_t,[t("div",$t,[t("img",{src:Nt,alt:"微信客服图标",onError:e,onLoad:o},null,32)]),a[4]||(a[4]=t("div",{class:"card-title"},"微信客服",-1))]),t("div",Ct,[t("img",{src:Ut,class:"card-icon-img",alt:"微信二维码",onError:e,onLoad:o},null,32)]),a[5]||(a[5]=t("div",{class:"card-desc"},[_("使用微信扫描二维码添加客服"),t("br"),_("或搜索微信号："),t("span",{class:"account-code"},"kefu_wechat123")],-1))]),t("div",xt,[t("div",St,[t("div",It,[t("img",{src:At,alt:"钉钉客服图标",onError:e,onLoad:o},null,32)]),a[6]||(a[6]=t("div",{class:"card-title"},"钉钉客服",-1))]),t("div",qt,[t("img",{src:Wt,class:"card-icon-img",alt:"钉钉二维码",onError:e,onLoad:o},null,32)]),a[7]||(a[7]=t("div",{class:"card-desc"},[_("使用钉钉扫描二维码添加客服"),t("br"),_("或搜索ID："),t("span",{class:"account-code"},"kefu_dingtalk456")],-1))])]),t("div",Lt,[t("div",Mt,[t("div",zt,[t("div",Et,[t("img",{src:jt,alt:"电话客服图标",onError:e,onLoad:o},null,32)]),a[8]||(a[8]=t("div",{class:"modal-card-title phone"},"电话客服",-1))]),a[9]||(a[9]=t("div",{class:"modal-phone-number"},"400-888-9999",-1)),a[10]||(a[10]=t("div",{class:"modal-phone-desc"},[_("服务时间：全天24小时"),t("br"),_("拨打客服热线获取即时支持"),t("br"),_("或发送邮件至 "),t("span",{class:"email-support"},"support@company.com")],-1))])]),t("button",Tt,[t("img",{src:Bt,alt:"联系客服图标",class:"action-icon",onError:e,onLoad:o},null,32),a[11]||(a[11]=_(" 联系在线客服 "))])])])]))}}),Gt=D(Pt,[["__scopeId","data-v-f5beb309"]]),Ot={class:"login-modal"},Rt={class:"modal-body"},Ht={class:"modal-form-area"},Dt={class:"login-type-tabs"},Vt={class:"form-group"},Ft={key:0,class:"error-message"},Jt={class:"form-group"},Kt={class:"password-input-wrapper"},Xt=["type"],Yt={class:"form-links"},Qt={class:"form-group code-group"},Zt=["disabled"],es={class:"form-tips"},ts={class:"form-row"},ss={class:"checkbox-label"},os=["disabled"],is={key:0,class:"loading-spinner"},as={class:"other-login"},rs={class:"social-login"},ns={__name:"UnifiedLoginModal",props:{visible:Boolean},emits:["close"],setup(s,{emit:e}){const o=s,i=e,a=oe(),u=Me("token"),n=C("password"),r=C({email:"",code:"",password:""}),g=C(!1),l=C(""),d=C("error"),k=C(""),c=C(!1),h=C(!1),x=C(0),y=E(()=>g.value?"处理中...":"登录"),U=()=>{const M=r.value.email;return M?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M)?(k.value="",!0):(k.value="请输入有效的邮箱地址",!1):(k.value="",!1)},w=M=>{n.value=M,l.value="",M==="code"?r.value.password="":r.value.code=""};let S=null;const L=async()=>{var M,m;if(!U()){l.value="请输入有效的邮箱地址",d.value="error";return}g.value=!0,l.value="";try{await j.get("/product/common/code",{email:r.value.email,type:"login"}),l.value="验证码已发送到您的邮箱",d.value="success",x.value=60,S=Ne(()=>{x.value--,x.value<=0&&clearInterval(S)},1e3)}catch(b){l.value=((m=(M=b.response)==null?void 0:M.data)==null?void 0:m.msg)||"发送失败，请稍后重试",d.value="error"}finally{g.value=!1}},I=async()=>{var M,m;if(!U()){l.value="请输入有效的邮箱地址",d.value="error";return}if(!h.value){l.value="请先同意用户协议",d.value="error";return}g.value=!0,l.value="";try{let b;const v={email:r.value.email};if(n.value==="password"){if(!r.value.password){l.value="请输入密码",d.value="error";return}v.password=r.value.password}else if(n.value==="code"){if(!r.value.code){l.value="请输入验证码",d.value="error";return}v.code=r.value.code}b=await j.post("/product/common/unified-auth",v),b.code===0&&b.data?(localStorage.setItem("token",b.data.tokenValue),localStorage.setItem("user",JSON.stringify(b.data)),u.value=b.data.tokenValue,a.setUser(b.data,b.data.tokenValue),l.value=b.data.isNewUser?"注册并登录成功":"登录成功",d.value="success",setTimeout(()=>{V(),window.location.reload()},1e3)):(l.value=b.msg||"操作失败",d.value="error")}catch(b){l.value=((m=(M=b.response)==null?void 0:M.data)==null?void 0:m.msg)||"网络错误，请稍后重试",d.value="error"}finally{g.value=!1}},B=()=>{l.value="请使用验证码登录，登录后可重置密码",d.value="info",w("code")},Q=()=>{l.value="谷歌登录暂未开放",d.value="info"},Z=()=>{l.value="GitHub登录暂未开放",d.value="info"},ee=()=>{l.value="Twitter登录暂未开放",d.value="info"},V=()=>{i("close"),r.value={email:"",code:"",password:""},l.value="",k.value="",h.value=!1,S&&(clearInterval(S),x.value=0)};return ie(()=>o.visible,M=>{M||S&&(clearInterval(S),x.value=0)}),(M,m)=>{const b=ze("Icon"),v=ae;return s.visible?(f(),p("div",{key:0,class:"modal-mask",onClick:G(V,["self"])},[t("div",Ot,[t("div",{class:"modal-header"},[t("div",{class:"modal-header-inner"},[m[7]||(m[7]=t("div",{class:"modal-title"},"凡图拉",-1)),m[8]||(m[8]=t("div",{class:"modal-subtitle"},"欢迎回来，请登录您的账户",-1)),t("button",{class:"modal-close",onClick:V},"×")])]),t("div",Rt,[t("div",Ht,[t("div",Dt,[t("button",{type:"button",class:J(["login-type-btn",{active:n.value==="password"}]),onClick:m[0]||(m[0]=T=>w("password"))}," 密码登录 ",2),t("button",{type:"button",class:J(["login-type-btn",{active:n.value==="code"}]),onClick:m[1]||(m[1]=T=>w("code"))}," 验证码登录 ",2)]),t("form",{onSubmit:G(I,["prevent"])},[t("div",Vt,[m[9]||(m[9]=t("label",null,"邮箱地址",-1)),K(t("input",{"onUpdate:modelValue":m[2]||(m[2]=T=>r.value.email=T),type:"email",placeholder:"请输入您的邮箱",required:"",onInput:U,class:J({error:k.value})},null,34),[[se,r.value.email]]),k.value?(f(),p("span",Ft,$(k.value),1)):z("",!0)]),n.value==="password"?(f(),p(R,{key:0},[t("div",Jt,[m[10]||(m[10]=t("label",null,"密码",-1)),t("div",Kt,[K(t("input",{"onUpdate:modelValue":m[3]||(m[3]=T=>r.value.password=T),type:c.value?"text":"password",placeholder:"请输入密码",required:""},null,8,Xt),[[Ee,r.value.password]]),t("button",{type:"button",class:"password-toggle",onClick:m[4]||(m[4]=T=>c.value=!c.value)},[q(b,{name:c.value?"mdi:eye-off":"mdi:eye"},null,8,["name"])])])]),t("div",Yt,[t("a",{onClick:G(B,["prevent"])},"忘记密码？")])],64)):n.value==="code"?(f(),p(R,{key:1},[t("div",Qt,[m[11]||(m[11]=t("label",null,"验证码",-1)),K(t("input",{"onUpdate:modelValue":m[5]||(m[5]=T=>r.value.code=T),type:"text",placeholder:"请输入验证码",maxlength:"6",required:""},null,512),[[se,r.value.code]]),t("button",{class:"code-btn-inside",type:"button",disabled:x.value>0||!r.value.email||k.value,onClick:L},$(x.value>0?x.value+"s":"获取验证码"),9,Zt)]),t("div",es,[q(b,{name:"mdi:information-outline"}),m[12]||(m[12]=t("span",null,"未注册的邮箱验证后将自动创建账号",-1))])],64)):z("",!0),t("div",ts,[t("label",ss,[K(t("input",{type:"checkbox","onUpdate:modelValue":m[6]||(m[6]=T=>h.value=T),required:""},null,512),[[Te,h.value]]),t("span",null,[m[15]||(m[15]=_("我已阅读并同意 ")),q(v,{to:"/privacy",target:"_blank"},{default:N(()=>m[13]||(m[13]=[_("《隐私协议》")])),_:1,__:[13]}),m[16]||(m[16]=_(" 和 ")),q(v,{to:"/policy",target:"_blank"},{default:N(()=>m[14]||(m[14]=[_("《用户政策》")])),_:1,__:[14]})])])]),t("button",{class:"submit-btn",type:"submit",disabled:g.value},[g.value?(f(),p("span",is)):z("",!0),_(" "+$(y.value),1)],8,os),l.value?(f(),p("div",{key:2,class:J(["message",d.value])},$(l.value),3)):z("",!0)],32),t("div",as,[m[17]||(m[17]=t("div",{class:"divider"},[t("span",null,"或使用其他方式登录")],-1)),t("div",rs,[t("button",{type:"button",class:"social-btn",onClick:Q,title:"Google登录"},[q(b,{name:"mdi:google"})]),t("button",{type:"button",class:"social-btn",onClick:Z,title:"GitHub登录"},[q(b,{name:"mdi:github"})]),t("button",{type:"button",class:"social-btn",onClick:ee,title:"Twitter登录"},[q(b,{name:"mdi:twitter"})])])])])])])])):z("",!0)}}},ls=D(ns,[["__scopeId","data-v-1249397f"]]),ds={getGoodsList(s){return j.get("/product/goods",s)},getGoodsDetail(s){return j.get(`/product/${s}`)},getHotGoods(s=8){return j.get("/product/goods",{limit:s,isHot:!0})},getRecommendGoods(s=8){return j.get("/product/goods",{limit:s,isRecommend:!0})},getCategories(){return j.get("/product/category")},searchGoods(s){return j.get("/product/goods",s)},getGoodsSkuInfo(s){return j.get(`/product/goods/getSkuInfo/${s}`)},getSkuByUnicode(s){return j.get(`/product/goods/getSkuByUnicode/${s}`)},getSkuResidue(s){return j.get(`/product/goods/getSkuResidue/${s}`)}},cs={class:"app-header"},us={class:"header-inner"},vs={class:"nav-menu"},fs={class:"header-actions"},ms={key:0,class:"search-dropdown"},gs={key:0,class:"search-loading"},ps={key:1,class:"search-no-results"},hs={key:2},ys=["onClick"],ws=["src","alt"],ks={class:"search-result-info"},bs={class:"search-result-name"},_s={class:"search-result-price"},$s={key:1,class:"user-section"},Cs={class:"cart-icon-wrapper"},xs={key:0,class:"cart-badge"},Ss={class:"user-name"},Is={key:0,class:"user-dropdown-menu"},qs=H({__name:"AppHeader",setup(s){const e=Ue(),o=oe(),i=Ae(),a=We(),u=C(!1),n=C(!1),r=C(!1),g=C(""),l=C([]),d=C(!1),k=C(!1),c=async()=>{const b=g.value.trim();if(console.log("开始搜索:",b),!b){d.value=!1,l.value=[];return}k.value=!0,d.value=!0;try{const v=await ds.searchGoods({keyword:b,page:1,limit:5});console.log("API返回结果:",v),v&&v.data?(l.value=Array.isArray(v.data)?v.data:v.data.list||[],console.log("处理后的搜索结果:",l.value),d.value=l.value.length>0):(console.log("无有效数据"),l.value=[],d.value=!0)}catch(v){console.error("搜索失败:",v),l.value=[],d.value=!0}finally{k.value=!1}};let h=null;const x=()=>{clearTimeout(h),h=setTimeout(()=>{c()},300)},y=b=>{a.push(`/goods/${b}`),g.value="",d.value=!1},U=b=>{b.key==="Enter"&&(b.preventDefault(),g.value.trim()&&c().then(()=>{l.value.length>0&&y(l.value[0].id)}))},w=()=>{o.isLoggedIn?a.push("/profile/orders"):r.value=!0},S=()=>{r.value=!1},L=()=>{u.value=!u.value},I=()=>{u.value=!1},B=()=>{a.push("/profile"),I()},Q=()=>{a.push("/profile/wallet"),I()},Z=()=>{a.push("/profile/orders"),I()},ee=()=>{a.push("/profile/exchange"),I()},V=()=>{a.push("/profile/referral"),I()},M=()=>{a.push("/profile/tickets"),I()};ie(()=>o.isLoggedIn,b=>{b&&r.value&&(r.value=!1)});const m=b=>{I();const v=document.querySelector(".search-box");v&&!v.contains(b.target)&&(d.value=!1)};return ye(()=>{document.addEventListener("click",m)}),je(()=>{document.removeEventListener("click",m)}),(b,v)=>{var re,ne,le,de;const T=gt,F=ae;return f(),p(R,null,[t("header",cs,[t("div",us,[q(F,{to:"/",class:"logo-area"},{default:N(()=>[q(T,{src:"/images/logo.png",alt:"凡图拉官方Logo - 优质流媒体服务平台",title:"返回凡图拉首页",width:40,height:40,loading:"eager",class:"logo-img",preset:"icon"}),v[8]||(v[8]=t("span",{class:"logo-text"},"凡图拉",-1))]),_:1,__:[8]}),t("nav",vs,[q(F,{to:"/",class:"nav-btn"},{default:N(()=>v[9]||(v[9]=[_("首页")])),_:1,__:[9]}),t("button",{onClick:w,class:"nav-btn"},"订单"),q(F,{to:"/community",class:"nav-btn"},{default:N(()=>v[10]||(v[10]=[_("社区帮助")])),_:1,__:[10]}),t("button",{class:"nav-btn",onClick:v[0]||(v[0]=A=>n.value=!0)},"客服")]),t("div",fs,[t("div",{class:"search-box",onClick:v[3]||(v[3]=G(()=>{},["stop"]))},[K(t("input",{"onUpdate:modelValue":v[1]||(v[1]=A=>g.value=A),onInput:x,onKeypress:U,onFocus:v[2]||(v[2]=A=>d.value=l.value.length>0),class:"search-input",type:"text",placeholder:"搜索商品..."},null,544),[[se,g.value]]),t("div",{class:"search-icon-bg",onClick:G(c,["stop"])},v[11]||(v[11]=[t("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none"},[t("circle",{cx:"11",cy:"11",r:"11",fill:"#E6F0FA"}),t("path",{d:"M15.5 15.5L13.1 13.1M14 10C14 12.2091 12.2091 14 10 14C7.79086 14 6 12.2091 6 10C6 7.79086 7.79086 6 10 6C12.2091 6 14 7.79086 14 10Z",stroke:"#235CDC","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])),d.value?(f(),p("div",ms,[k.value?(f(),p("div",gs,"搜索中...")):l.value.length===0?(f(),p("div",ps,"未找到相关商品")):(f(),p("div",hs,[(f(!0),p(R,null,X(l.value,A=>(f(),p("div",{key:A.id,class:"search-result-item",onClick:Os=>y(A.id)},[t("img",{src:A.image||"/images/netflix.png",alt:A.name,class:"search-result-img"},null,8,ws),t("div",ks,[t("div",bs,$(A.name||A.title),1),t("div",_s,"¥"+$(A.price),1)])],8,ys))),128))]))])):z("",!0)]),W(o).isLoggedIn?(f(),p("div",$s,[q(F,{to:"/cart",class:"cart-icon",title:"查看购物车",onClick:v[5]||(v[5]=G(()=>{},["stop"]))},{default:N(()=>[t("div",Cs,[q(T,{src:"/images/gouwuche.png",alt:"购物车图标 - 查看您的购物车",title:"点击查看购物车",width:24,height:24,loading:"eager",class:"cart-img",preset:"icon"}),W(i).totalCount>0?(f(),p("span",xs,$(W(i).totalCount),1)):z("",!0)]),v[13]||(v[13]=t("span",{class:"cart-text"},"购物车",-1))]),_:1,__:[13]}),t("div",{class:"user-info-container",onClick:v[6]||(v[6]=G(()=>{},["stop"]))},[t("div",{onClick:L,class:"user-info"},[q(T,{src:((re=W(o).user)==null?void 0:re.avatar)||"/images/head1.png",alt:`${((ne=W(o).user)==null?void 0:ne.nickname)||"用户"}的个人头像`,title:`${((le=W(o).user)==null?void 0:le.nickname)||"用户"}的个人中心`,width:32,height:32,loading:"eager",class:"user-avatar",preset:"avatar"},null,8,["src","alt","title"]),t("span",Ss,$(((de=W(o).user)==null?void 0:de.nickname)||"XXX"),1)]),u.value?(f(),p("div",Is,[t("div",{class:"menu-item",onClick:B},"个人中心"),t("div",{class:"menu-item",onClick:Q},"我的钱包"),t("div",{class:"menu-item",onClick:Z},"我的订单"),t("div",{class:"menu-item",onClick:ee},"兑换中心"),t("div",{class:"menu-item",onClick:V},"推广返现"),t("div",{class:"menu-item",onClick:M},"我的工单")])):z("",!0)])])):(f(),P(F,{key:0,to:"#",class:"login-btn",onClick:v[4]||(v[4]=G(A=>W(e).openLogin(),["prevent"]))},{default:N(()=>v[12]||(v[12]=[_(" 登录/注册 ")])),_:1,__:[12]}))])])]),n.value?(f(),P(Gt,{key:0,onClose:v[7]||(v[7]=A=>n.value=!1)})):z("",!0),q(ls,{visible:r.value,onClose:S},null,8,["visible"])],64)}}}),Ds=D(qs,[["__scopeId","data-v-a87d5f49"]]),Ls=H({__name:"JoinUsModal",props:{visible:{type:Boolean}},emits:["close"],setup(s,{emit:e}){const o=e;function i(){o("close")}function a(){const n="Companyservice";navigator.clipboard?navigator.clipboard.writeText(n).then(()=>{alert("微信号已复制到剪贴板")}).catch(()=>{u(n)}):u(n)}function u(n){const r=document.createElement("textarea");r.value=n,document.body.appendChild(r),r.select();try{document.execCommand("copy"),alert("微信号已复制到剪贴板")}catch{alert("复制失败，请手动复制微信号："+n)}document.body.removeChild(r)}return(n,r)=>n.visible?(f(),p("div",{key:0,class:"modal-mask",onClick:G(i,["self"])},[t("div",{class:"join-modal"},[t("div",{class:"modal-header"},[t("div",{class:"modal-header-inner"},[r[0]||(r[0]=t("div",{class:"modal-title"},"加入我们的社群",-1)),r[1]||(r[1]=t("div",{class:"modal-subtitle"},"扫码添加客服微信，获取专属服务",-1)),t("button",{class:"modal-close",onClick:i},"×")])]),t("div",{class:"modal-body"},[t("div",{class:"wechat-content"},[r[3]||(r[3]=t("div",{class:"qr-section"},[t("div",{class:"qr-container"},[t("img",{src:Ge,alt:"微信二维码",class:"qr-code"})])],-1)),t("div",{class:"wechat-info"},[r[2]||(r[2]=t("div",{class:"wechat-id"},[t("span",{class:"wechat-label"},"客服微信："),t("span",{class:"wechat-value"},"Companyservice")],-1)),t("div",{class:"copy-section"},[t("button",{class:"copy-btn",onClick:a},"📋 复制微信号")])]),r[4]||(r[4]=we('<div class="steps-section" data-v-44263842><div class="steps-title" data-v-44263842>添加客服步骤</div><div class="steps-container" data-v-44263842><div class="step-item" data-v-44263842><div class="step-number" data-v-44263842>1</div><div class="step-text" data-v-44263842>下载二维码图片到电脑</div></div><div class="step-item" data-v-44263842><div class="step-number" data-v-44263842>2</div><div class="step-text" data-v-44263842>打开手机微信扫一扫</div></div><div class="step-item" data-v-44263842><div class="step-number" data-v-44263842>3</div><div class="step-text" data-v-44263842>点击加入社群</div></div></div></div>',1))])])])])):z("",!0)}}),Ms=D(Ls,[["__scopeId","data-v-44263842"]]),zs={class:"app-footer"},Es={class:"footer-bg"},Ts={class:"footer-cols"},Ns={class:"footer-title"},Us={key:0,class:"footer-items"},As={key:11,class:"footer-item"},Ws={key:1,class:"footer-icons"},js=["innerHTML"],Bs={key:2,class:"footer-extra"},Ps={key:3,class:"footer-partner-block"},Gs=H({__name:"AppFooter",setup(s){const e=C(!1),o=C(!1),i=oe();function a(){e.value=!0}function u(){e.value=!1}function n(){o.value=!1}function r(l){i.isLoggedIn?Pe(l):o.value=!0}ie(()=>i.isLoggedIn,l=>{l&&o.value&&(o.value=!1)});const g=[{title:"功能导航",items:["个人中心","我的订单","邀请推广","社区帮助"]},{title:"条款与政策",items:["隐私政策","用户协议","退款政策","免责声明"]},{title:"关于我们",items:["公司简介","我们的使命","我们的优势","加入我们"]},{title:"帮助支持",items:["联系我们","商务合作","发送邮件"]},{title:"关注我们",extra:"获取最新促销信息和独家优惠",icons:[{label:"微信",svg:'<img src="/images/link1.png" alt="link1" style="width:24px;height:24px;" />'},{label:"微博",svg:'<img src="/images/link2.png" alt="link2" style="width:24px;height:24px;" />'},{label:"订阅",svg:'<img src="/images/link3.png" alt="link3" style="width:24px;height:24px;" />'},{label:"抖音",svg:'<img src="/images/link4.png" alt="link4" style="width:24px;height:24px;" />'}],partner:!0}];return(l,d)=>{const k=ae,c=Ms;return f(),p("footer",zs,[t("div",Es,[t("div",Ts,[(f(),p(R,null,X(g,(h,x)=>t("div",{class:"footer-col",key:h.title},[t("div",Ns,$(h.title),1),d[4]||(d[4]=t("div",{class:"footer-underline"},null,-1)),h.items&&!h.icons?(f(),p("div",Us,[(f(!0),p(R,null,X(h.items,y=>(f(),p(R,{key:y},[y==="个人中心"?(f(),p("button",{key:0,onClick:d[0]||(d[0]=U=>r("/profile")),class:"footer-item footer-link footer-button"},$(y),1)):y==="我的订单"?(f(),p("button",{key:1,onClick:d[1]||(d[1]=U=>r("/profile/orders")),class:"footer-item footer-link footer-button"},$(y),1)):y==="邀请推广"?(f(),p("button",{key:2,onClick:d[2]||(d[2]=U=>r("/profile/referral")),class:"footer-item footer-link footer-button"},$(y),1)):y==="社区帮助"?(f(),P(k,{key:3,to:"/community",class:"footer-item footer-link"},{default:N(()=>[_($(y),1)]),_:2},1024)):y==="隐私政策"?(f(),P(k,{key:4,to:"/privacy",class:"footer-item footer-link"},{default:N(()=>[_($(y),1)]),_:2},1024)):y==="用户协议"?(f(),P(k,{key:5,to:"/policy",class:"footer-item footer-link"},{default:N(()=>[_($(y),1)]),_:2},1024)):y==="退款政策"?(f(),P(k,{key:6,to:"/refund",class:"footer-item footer-link"},{default:N(()=>[_($(y),1)]),_:2},1024)):y==="免责声明"?(f(),P(k,{key:7,to:"/disclaimer",class:"footer-item footer-link"},{default:N(()=>[_($(y),1)]),_:2},1024)):y==="公司简介"?(f(),P(k,{key:8,to:"/company",class:"footer-item footer-link"},{default:N(()=>[_($(y),1)]),_:2},1024)):y==="我们的使命"||y==="我们的优势"?(f(),P(k,{key:9,to:"/about-us",class:"footer-item footer-link"},{default:N(()=>[_($(y),1)]),_:2},1024)):y==="加入我们"?(f(),p("button",{key:10,onClick:a,class:"footer-item footer-link footer-button"},$(y),1)):(f(),p("div",As,$(y),1))],64))),128))])):z("",!0),h.icons?(f(),p("div",Ws,[(f(!0),p(R,null,X(h.icons,y=>(f(),p("span",{key:y.label,class:"footer-icon",innerHTML:y.svg},null,8,js))),128))])):z("",!0),h.extra&&!h.partner?(f(),p("div",Bs,$(h.extra),1)):z("",!0),h.partner?(f(),p("div",Ps,d[3]||(d[3]=[t("div",{class:"footer-title"},"合作伙伴",-1),t("div",{class:"footer-underline"},null,-1),t("div",{class:"footer-partner-list"},"支付宝 | 顺丰速运 | 京东物流",-1)]))):z("",!0)])),64))]),d[5]||(d[5]=t("div",{class:"footer-bottom"}," © 2019-2025 凡图拉 | 云南凡图拉科技有限公司 | 滇ICP备 2025060486号-1 ",-1))]),q(c,{visible:e.value,onClose:u},null,8,["visible"]),q(Be,{visible:o.value,onClose:n},null,8,["visible"])])}}}),Vs=D(Gs,[["__scopeId","data-v-c9608074"]]);export{Ds as _,Vs as a,gt as b,ds as g};
