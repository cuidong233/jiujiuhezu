import{_ as Ct}from"./Dw_Z4xcU.js";import{_ as Et}from"./DcjaKIUg.js";import{p as bt,Z as It,_ as Ne,r as U,B as Q,C as Pe,c as _,m as $,o as k,a as m,i as dt,d as X,t as F,J as x,D as Me,O,f as St,u as Bt,h as Tt,g as Rt,H as At,b as qe,n as oe}from"./EcDhdyxl.js";import{P as Nt}from"./CEhaGLKI.js";const Pt=bt("/images/zhifu3.png");var j={},se,De;function Mt(){return De||(De=1,se=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),se}var ae={},V={},Fe;function H(){if(Fe)return V;Fe=1;let r;const s=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return V.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},V.getSymbolTotalCodewords=function(n){return s[n]},V.getBCHDigit=function(o){let n=0;for(;o!==0;)n++,o>>>=1;return n},V.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');r=n},V.isKanjiModeEnabled=function(){return typeof r<"u"},V.toSJIS=function(n){return r(n)},V}var ie={},$e;function Ue(){return $e||($e=1,function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function s(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+o)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,e){if(r.isValid(n))return n;try{return s(n)}catch{return e}}}(ie)),ie}var le,ze;function Ut(){if(ze)return le;ze=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(s){const o=Math.floor(s/8);return(this.buffer[o]>>>7-s%8&1)===1},put:function(s,o){for(let n=0;n<o;n++)this.putBit((s>>>o-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(s){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),s&&(this.buffer[o]|=128>>>this.length%8),this.length++}},le=r,le}var ue,Ve;function kt(){if(Ve)return ue;Ve=1;function r(s){if(!s||s<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=s,this.data=new Uint8Array(s*s),this.reservedBit=new Uint8Array(s*s)}return r.prototype.set=function(s,o,n,e){const t=s*this.size+o;this.data[t]=n,e&&(this.reservedBit[t]=!0)},r.prototype.get=function(s,o){return this.data[s*this.size+o]},r.prototype.xor=function(s,o,n){this.data[s*this.size+o]^=n},r.prototype.isReserved=function(s,o){return this.reservedBit[s*this.size+o]},ue=r,ue}var ce={},He;function _t(){return He||(He=1,function(r){const s=H().getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const e=Math.floor(n/7)+2,t=s(n),a=t===145?26:Math.ceil((t-13)/(2*e-2))*2,i=[t-7];for(let l=1;l<e-1;l++)i[l]=i[l-1]-a;return i.push(6),i.reverse()},r.getPositions=function(n){const e=[],t=r.getRowColCoords(n),a=t.length;for(let i=0;i<a;i++)for(let l=0;l<a;l++)i===0&&l===0||i===0&&l===a-1||i===a-1&&l===0||e.push([t[i],t[l]]);return e}}(ce)),ce}var de={},Ke;function Lt(){if(Ke)return de;Ke=1;const r=H().getSymbolSize,s=7;return de.getPositions=function(n){const e=r(n);return[[0,0],[e-s,0],[0,e-s]]},de}var fe={},Je;function qt(){return Je||(Je=1,function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};r.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7},r.from=function(e){return r.isValid(e)?parseInt(e,10):void 0},r.getPenaltyN1=function(e){const t=e.size;let a=0,i=0,l=0,p=null,d=null;for(let u=0;u<t;u++){i=l=0,p=d=null;for(let g=0;g<t;g++){let h=e.get(u,g);h===p?i++:(i>=5&&(a+=s.N1+(i-5)),p=h,i=1),h=e.get(g,u),h===d?l++:(l>=5&&(a+=s.N1+(l-5)),d=h,l=1)}i>=5&&(a+=s.N1+(i-5)),l>=5&&(a+=s.N1+(l-5))}return a},r.getPenaltyN2=function(e){const t=e.size;let a=0;for(let i=0;i<t-1;i++)for(let l=0;l<t-1;l++){const p=e.get(i,l)+e.get(i,l+1)+e.get(i+1,l)+e.get(i+1,l+1);(p===4||p===0)&&a++}return a*s.N2},r.getPenaltyN3=function(e){const t=e.size;let a=0,i=0,l=0;for(let p=0;p<t;p++){i=l=0;for(let d=0;d<t;d++)i=i<<1&2047|e.get(p,d),d>=10&&(i===1488||i===93)&&a++,l=l<<1&2047|e.get(d,p),d>=10&&(l===1488||l===93)&&a++}return a*s.N3},r.getPenaltyN4=function(e){let t=0;const a=e.data.length;for(let l=0;l<a;l++)t+=e.data[l];return Math.abs(Math.ceil(t*100/a/5)-10)*s.N4};function o(n,e,t){switch(n){case r.Patterns.PATTERN000:return(e+t)%2===0;case r.Patterns.PATTERN001:return e%2===0;case r.Patterns.PATTERN010:return t%3===0;case r.Patterns.PATTERN011:return(e+t)%3===0;case r.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2===0;case r.Patterns.PATTERN101:return e*t%2+e*t%3===0;case r.Patterns.PATTERN110:return(e*t%2+e*t%3)%2===0;case r.Patterns.PATTERN111:return(e*t%3+(e+t)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(e,t){const a=t.size;for(let i=0;i<a;i++)for(let l=0;l<a;l++)t.isReserved(l,i)||t.xor(l,i,o(e,l,i))},r.getBestMask=function(e,t){const a=Object.keys(r.Patterns).length;let i=0,l=1/0;for(let p=0;p<a;p++){t(p),r.applyMask(p,e);const d=r.getPenaltyN1(e)+r.getPenaltyN2(e)+r.getPenaltyN3(e)+r.getPenaltyN4(e);r.applyMask(p,e),d<l&&(l=d,i=p)}return i}}(fe)),fe}var Z={},Oe;function ft(){if(Oe)return Z;Oe=1;const r=Ue(),s=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Z.getBlocksCount=function(e,t){switch(t){case r.L:return s[(e-1)*4+0];case r.M:return s[(e-1)*4+1];case r.Q:return s[(e-1)*4+2];case r.H:return s[(e-1)*4+3];default:return}},Z.getTotalCodewordsCount=function(e,t){switch(t){case r.L:return o[(e-1)*4+0];case r.M:return o[(e-1)*4+1];case r.Q:return o[(e-1)*4+2];case r.H:return o[(e-1)*4+3];default:return}},Z}var ge={},G={},je;function Dt(){if(je)return G;je=1;const r=new Uint8Array(512),s=new Uint8Array(256);return function(){let n=1;for(let e=0;e<255;e++)r[e]=n,s[n]=e,n<<=1,n&256&&(n^=285);for(let e=255;e<512;e++)r[e]=r[e-255]}(),G.log=function(n){if(n<1)throw new Error("log("+n+")");return s[n]},G.exp=function(n){return r[n]},G.mul=function(n,e){return n===0||e===0?0:r[s[n]+s[e]]},G}var Qe;function Ft(){return Qe||(Qe=1,function(r){const s=Dt();r.mul=function(n,e){const t=new Uint8Array(n.length+e.length-1);for(let a=0;a<n.length;a++)for(let i=0;i<e.length;i++)t[a+i]^=s.mul(n[a],e[i]);return t},r.mod=function(n,e){let t=new Uint8Array(n);for(;t.length-e.length>=0;){const a=t[0];for(let l=0;l<e.length;l++)t[l]^=s.mul(e[l],a);let i=0;for(;i<t.length&&t[i]===0;)i++;t=t.slice(i)}return t},r.generateECPolynomial=function(n){let e=new Uint8Array([1]);for(let t=0;t<n;t++)e=r.mul(e,new Uint8Array([1,s.exp(t)]));return e}}(ge)),ge}var he,Ye;function $t(){if(Ye)return he;Ye=1;const r=Ft();function s(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}return s.prototype.initialize=function(n){this.degree=n,this.genPoly=r.generateECPolynomial(this.degree)},s.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(n.length+this.degree);e.set(n);const t=r.mod(e,this.genPoly),a=this.degree-t.length;if(a>0){const i=new Uint8Array(this.degree);return i.set(t,a),i}return t},he=s,he}var pe={},me={},ye={},Ge;function gt(){return Ge||(Ge=1,ye.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40}),ye}var L={},We;function ht(){if(We)return L;We=1;const r="[0-9]+",s="[A-Z $%*+\\-./:]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+`)(?:.|[\r
]))+`;L.KANJI=new RegExp(o,"g"),L.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),L.BYTE=new RegExp(n,"g"),L.NUMERIC=new RegExp(r,"g"),L.ALPHANUMERIC=new RegExp(s,"g");const e=new RegExp("^"+o+"$"),t=new RegExp("^"+r+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return L.testKanji=function(l){return e.test(l)},L.testNumeric=function(l){return t.test(l)},L.testAlphanumeric=function(l){return a.test(l)},L}var Ze;function K(){return Ze||(Ze=1,function(r){const s=gt(),o=ht();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(t,a){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!s.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?t.ccBits[0]:a<27?t.ccBits[1]:t.ccBits[2]},r.getBestModeForData=function(t){return o.testNumeric(t)?r.NUMERIC:o.testAlphanumeric(t)?r.ALPHANUMERIC:o.testKanji(t)?r.KANJI:r.BYTE},r.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},r.isValid=function(t){return t&&t.bit&&t.ccBits};function n(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+e)}}r.from=function(t,a){if(r.isValid(t))return t;try{return n(t)}catch{return a}}}(me)),me}var Xe;function zt(){return Xe||(Xe=1,function(r){const s=H(),o=ft(),n=Ue(),e=K(),t=gt(),a=7973,i=s.getBCHDigit(a);function l(g,h,E){for(let N=1;N<=40;N++)if(h<=r.getCapacity(N,E,g))return N}function p(g,h){return e.getCharCountIndicator(g,h)+4}function d(g,h){let E=0;return g.forEach(function(N){const P=p(N.mode,h);E+=P+N.getBitsLength()}),E}function u(g,h){for(let E=1;E<=40;E++)if(d(g,E)<=r.getCapacity(E,h,e.MIXED))return E}r.from=function(h,E){return t.isValid(h)?parseInt(h,10):E},r.getCapacity=function(h,E,N){if(!t.isValid(h))throw new Error("Invalid QR Code version");typeof N>"u"&&(N=e.BYTE);const P=s.getSymbolTotalCodewords(h),T=o.getTotalCodewordsCount(h,E),R=(P-T)*8;if(N===e.MIXED)return R;const f=R-p(N,h);switch(N){case e.NUMERIC:return Math.floor(f/10*3);case e.ALPHANUMERIC:return Math.floor(f/11*2);case e.KANJI:return Math.floor(f/13);case e.BYTE:default:return Math.floor(f/8)}},r.getBestVersionForData=function(h,E){let N;const P=n.from(E,n.M);if(Array.isArray(h)){if(h.length>1)return u(h,P);if(h.length===0)return 1;N=h[0]}else N=h;return l(N.mode,N.getLength(),P)},r.getEncodedBits=function(h){if(!t.isValid(h)||h<7)throw new Error("Invalid QR Code version");let E=h<<12;for(;s.getBCHDigit(E)-i>=0;)E^=a<<s.getBCHDigit(E)-i;return h<<12|E}}(pe)),pe}var ve={},xe;function Vt(){if(xe)return ve;xe=1;const r=H(),s=1335,o=21522,n=r.getBCHDigit(s);return ve.getEncodedBits=function(t,a){const i=t.bit<<3|a;let l=i<<10;for(;r.getBCHDigit(l)-n>=0;)l^=s<<r.getBCHDigit(l)-n;return(i<<10|l)^o},ve}var we={},Ce,et;function Ht(){if(et)return Ce;et=1;const r=K();function s(o){this.mode=r.NUMERIC,this.data=o.toString()}return s.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(n){let e,t,a;for(e=0;e+3<=this.data.length;e+=3)t=this.data.substr(e,3),a=parseInt(t,10),n.put(a,10);const i=this.data.length-e;i>0&&(t=this.data.substr(e),a=parseInt(t,10),n.put(a,i*3+1))},Ce=s,Ce}var Ee,tt;function Kt(){if(tt)return Ee;tt=1;const r=K(),s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(n){this.mode=r.ALPHANUMERIC,this.data=n}return o.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let a=s.indexOf(this.data[t])*45;a+=s.indexOf(this.data[t+1]),e.put(a,11)}this.data.length%2&&e.put(s.indexOf(this.data[t]),6)},Ee=o,Ee}var be,nt;function Jt(){if(nt)return be;nt=1;const r=K();function s(o){this.mode=r.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}return s.getBitsLength=function(n){return n*8},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(o){for(let n=0,e=this.data.length;n<e;n++)o.put(this.data[n],8)},be=s,be}var Ie,rt;function Ot(){if(rt)return Ie;rt=1;const r=K(),s=H();function o(n){this.mode=r.KANJI,this.data=n}return o.getBitsLength=function(e){return e*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(n){let e;for(e=0;e<this.data.length;e++){let t=s.toSJIS(this.data[e]);if(t>=33088&&t<=40956)t-=33088;else if(t>=57408&&t<=60351)t-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);t=(t>>>8&255)*192+(t&255),n.put(t,13)}},Ie=o,Ie}var Se={exports:{}},ot;function jt(){return ot||(ot=1,function(r){var s={single_source_shortest_paths:function(o,n,e){var t={},a={};a[n]=0;var i=s.PriorityQueue.make();i.push(n,0);for(var l,p,d,u,g,h,E,N,P;!i.empty();){l=i.pop(),p=l.value,u=l.cost,g=o[p]||{};for(d in g)g.hasOwnProperty(d)&&(h=g[d],E=u+h,N=a[d],P=typeof a[d]>"u",(P||N>E)&&(a[d]=E,i.push(d,E),t[d]=p))}if(typeof e<"u"&&typeof a[e]>"u"){var T=["Could not find a path from ",n," to ",e,"."].join("");throw new Error(T)}return t},extract_shortest_path_from_predecessor_list:function(o,n){for(var e=[],t=n;t;)e.push(t),o[t],t=o[t];return e.reverse(),e},find_path:function(o,n,e){var t=s.single_source_shortest_paths(o,n,e);return s.extract_shortest_path_from_predecessor_list(t,e)},PriorityQueue:{make:function(o){var n=s.PriorityQueue,e={},t;o=o||{};for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e.queue=[],e.sorter=o.sorter||n.default_sorter,e},default_sorter:function(o,n){return o.cost-n.cost},push:function(o,n){var e={value:o,cost:n};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=s}(Se)),Se.exports}var st;function Qt(){return st||(st=1,function(r){const s=K(),o=Ht(),n=Kt(),e=Jt(),t=Ot(),a=ht(),i=H(),l=jt();function p(T){return unescape(encodeURIComponent(T)).length}function d(T,R,f){const C=[];let M;for(;(M=T.exec(f))!==null;)C.push({data:M[0],index:M.index,mode:R,length:M[0].length});return C}function u(T){const R=d(a.NUMERIC,s.NUMERIC,T),f=d(a.ALPHANUMERIC,s.ALPHANUMERIC,T);let C,M;return i.isKanjiModeEnabled()?(C=d(a.BYTE,s.BYTE,T),M=d(a.KANJI,s.KANJI,T)):(C=d(a.BYTE_KANJI,s.BYTE,T),M=[]),R.concat(f,C,M).sort(function(I,b){return I.index-b.index}).map(function(I){return{data:I.data,mode:I.mode,length:I.length}})}function g(T,R){switch(R){case s.NUMERIC:return o.getBitsLength(T);case s.ALPHANUMERIC:return n.getBitsLength(T);case s.KANJI:return t.getBitsLength(T);case s.BYTE:return e.getBitsLength(T)}}function h(T){return T.reduce(function(R,f){const C=R.length-1>=0?R[R.length-1]:null;return C&&C.mode===f.mode?(R[R.length-1].data+=f.data,R):(R.push(f),R)},[])}function E(T){const R=[];for(let f=0;f<T.length;f++){const C=T[f];switch(C.mode){case s.NUMERIC:R.push([C,{data:C.data,mode:s.ALPHANUMERIC,length:C.length},{data:C.data,mode:s.BYTE,length:C.length}]);break;case s.ALPHANUMERIC:R.push([C,{data:C.data,mode:s.BYTE,length:C.length}]);break;case s.KANJI:R.push([C,{data:C.data,mode:s.BYTE,length:p(C.data)}]);break;case s.BYTE:R.push([{data:C.data,mode:s.BYTE,length:p(C.data)}])}}return R}function N(T,R){const f={},C={start:{}};let M=["start"];for(let v=0;v<T.length;v++){const I=T[v],b=[];for(let y=0;y<I.length;y++){const w=I[y],c=""+v+y;b.push(c),f[c]={node:w,lastCount:0},C[c]={};for(let B=0;B<M.length;B++){const S=M[B];f[S]&&f[S].node.mode===w.mode?(C[S][c]=g(f[S].lastCount+w.length,w.mode)-g(f[S].lastCount,w.mode),f[S].lastCount+=w.length):(f[S]&&(f[S].lastCount=w.length),C[S][c]=g(w.length,w.mode)+4+s.getCharCountIndicator(w.mode,R))}}M=b}for(let v=0;v<M.length;v++)C[M[v]].end=0;return{map:C,table:f}}function P(T,R){let f;const C=s.getBestModeForData(T);if(f=s.from(R,C),f!==s.BYTE&&f.bit<C.bit)throw new Error('"'+T+'" cannot be encoded with mode '+s.toString(f)+`.
 Suggested mode is: `+s.toString(C));switch(f===s.KANJI&&!i.isKanjiModeEnabled()&&(f=s.BYTE),f){case s.NUMERIC:return new o(T);case s.ALPHANUMERIC:return new n(T);case s.KANJI:return new t(T);case s.BYTE:return new e(T)}}r.fromArray=function(R){return R.reduce(function(f,C){return typeof C=="string"?f.push(P(C,null)):C.data&&f.push(P(C.data,C.mode)),f},[])},r.fromString=function(R,f){const C=u(R,i.isKanjiModeEnabled()),M=E(C),v=N(M,f),I=l.find_path(v.map,"start","end"),b=[];for(let y=1;y<I.length-1;y++)b.push(v.table[I[y]].node);return r.fromArray(h(b))},r.rawSplit=function(R){return r.fromArray(u(R,i.isKanjiModeEnabled()))}}(we)),we}var at;function Yt(){if(at)return ae;at=1;const r=H(),s=Ue(),o=Ut(),n=kt(),e=_t(),t=Lt(),a=qt(),i=ft(),l=$t(),p=zt(),d=Vt(),u=K(),g=Qt();function h(v,I){const b=v.size,y=t.getPositions(I);for(let w=0;w<y.length;w++){const c=y[w][0],B=y[w][1];for(let S=-1;S<=7;S++)if(!(c+S<=-1||b<=c+S))for(let A=-1;A<=7;A++)B+A<=-1||b<=B+A||(S>=0&&S<=6&&(A===0||A===6)||A>=0&&A<=6&&(S===0||S===6)||S>=2&&S<=4&&A>=2&&A<=4?v.set(c+S,B+A,!0,!0):v.set(c+S,B+A,!1,!0))}}function E(v){const I=v.size;for(let b=8;b<I-8;b++){const y=b%2===0;v.set(b,6,y,!0),v.set(6,b,y,!0)}}function N(v,I){const b=e.getPositions(I);for(let y=0;y<b.length;y++){const w=b[y][0],c=b[y][1];for(let B=-2;B<=2;B++)for(let S=-2;S<=2;S++)B===-2||B===2||S===-2||S===2||B===0&&S===0?v.set(w+B,c+S,!0,!0):v.set(w+B,c+S,!1,!0)}}function P(v,I){const b=v.size,y=p.getEncodedBits(I);let w,c,B;for(let S=0;S<18;S++)w=Math.floor(S/3),c=S%3+b-8-3,B=(y>>S&1)===1,v.set(w,c,B,!0),v.set(c,w,B,!0)}function T(v,I,b){const y=v.size,w=d.getEncodedBits(I,b);let c,B;for(c=0;c<15;c++)B=(w>>c&1)===1,c<6?v.set(c,8,B,!0):c<8?v.set(c+1,8,B,!0):v.set(y-15+c,8,B,!0),c<8?v.set(8,y-c-1,B,!0):c<9?v.set(8,15-c-1+1,B,!0):v.set(8,15-c-1,B,!0);v.set(y-8,8,1,!0)}function R(v,I){const b=v.size;let y=-1,w=b-1,c=7,B=0;for(let S=b-1;S>0;S-=2)for(S===6&&S--;;){for(let A=0;A<2;A++)if(!v.isReserved(w,S-A)){let z=!1;B<I.length&&(z=(I[B]>>>c&1)===1),v.set(w,S-A,z),c--,c===-1&&(B++,c=7)}if(w+=y,w<0||b<=w){w-=y,y=-y;break}}}function f(v,I,b){const y=new o;b.forEach(function(A){y.put(A.mode.bit,4),y.put(A.getLength(),u.getCharCountIndicator(A.mode,v)),A.write(y)});const w=r.getSymbolTotalCodewords(v),c=i.getTotalCodewordsCount(v,I),B=(w-c)*8;for(y.getLengthInBits()+4<=B&&y.put(0,4);y.getLengthInBits()%8!==0;)y.putBit(0);const S=(B-y.getLengthInBits())/8;for(let A=0;A<S;A++)y.put(A%2?17:236,8);return C(y,v,I)}function C(v,I,b){const y=r.getSymbolTotalCodewords(I),w=i.getTotalCodewordsCount(I,b),c=y-w,B=i.getBlocksCount(I,b),S=y%B,A=B-S,z=Math.floor(y/B),Y=Math.floor(c/B),yt=Y+1,ke=z-Y,vt=new l(ke);let ee=0;const W=new Array(B),_e=new Array(B);let te=0;const wt=new Uint8Array(v.buffer);for(let J=0;J<B;J++){const re=J<A?Y:yt;W[J]=wt.slice(ee,ee+re),_e[J]=vt.encode(W[J]),ee+=re,te=Math.max(te,re)}const ne=new Uint8Array(y);let Le=0,q,D;for(q=0;q<te;q++)for(D=0;D<B;D++)q<W[D].length&&(ne[Le++]=W[D][q]);for(q=0;q<ke;q++)for(D=0;D<B;D++)ne[Le++]=_e[D][q];return ne}function M(v,I,b,y){let w;if(Array.isArray(v))w=g.fromArray(v);else if(typeof v=="string"){let z=I;if(!z){const Y=g.rawSplit(v);z=p.getBestVersionForData(Y,b)}w=g.fromString(v,z||40)}else throw new Error("Invalid data");const c=p.getBestVersionForData(w,b);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(!I)I=c;else if(I<c)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+c+`.
`);const B=f(I,b,w),S=r.getSymbolSize(I),A=new n(S);return h(A,I),E(A),N(A,I),T(A,b,0),I>=7&&P(A,I),R(A,B),isNaN(y)&&(y=a.getBestMask(A,T.bind(null,A,b))),a.applyMask(y,A),T(A,b,y),{modules:A,version:I,errorCorrectionLevel:b,maskPattern:y,segments:w}}return ae.create=function(I,b){if(typeof I>"u"||I==="")throw new Error("No input text");let y=s.M,w,c;return typeof b<"u"&&(y=s.from(b.errorCorrectionLevel,s.M),w=p.from(b.version),c=a.from(b.maskPattern),b.toSJISFunc&&r.setToSJISFunction(b.toSJISFunc)),M(I,w,y,c)},ae}var Be={},Te={},it;function pt(){return it||(it=1,function(r){function s(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let n=o.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+o);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(t){return[t,t]}))),n.length===6&&n.push("F","F");const e=parseInt(n.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const e=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,t=n.width&&n.width>=21?n.width:void 0,a=n.scale||4;return{width:t,scale:t?4:a,margin:e,color:{dark:s(n.color.dark||"#000000ff"),light:s(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,e){return e.width&&e.width>=n+e.margin*2?e.width/(n+e.margin*2):e.scale},r.getImageWidth=function(n,e){const t=r.getScale(n,e);return Math.floor((n+e.margin*2)*t)},r.qrToImageData=function(n,e,t){const a=e.modules.size,i=e.modules.data,l=r.getScale(a,t),p=Math.floor((a+t.margin*2)*l),d=t.margin*l,u=[t.color.light,t.color.dark];for(let g=0;g<p;g++)for(let h=0;h<p;h++){let E=(g*p+h)*4,N=t.color.light;if(g>=d&&h>=d&&g<p-d&&h<p-d){const P=Math.floor((g-d)/l),T=Math.floor((h-d)/l);N=u[i[P*a+T]?1:0]}n[E++]=N.r,n[E++]=N.g,n[E++]=N.b,n[E]=N.a}}}(Te)),Te}var lt;function Gt(){return lt||(lt=1,function(r){const s=pt();function o(e,t,a){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=a,t.width=a,t.style.height=a+"px",t.style.width=a+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(t,a,i){let l=i,p=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(p=n()),l=s.getOptions(l);const d=s.getImageWidth(t.modules.size,l),u=p.getContext("2d"),g=u.createImageData(d,d);return s.qrToImageData(g.data,t,l),o(u,p,d),u.putImageData(g,0,0),p},r.renderToDataURL=function(t,a,i){let l=i;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const p=r.render(t,a,l),d=l.type||"image/png",u=l.rendererOpts||{};return p.toDataURL(d,u.quality)}}(Be)),Be}var Re={},ut;function Wt(){if(ut)return Re;ut=1;const r=pt();function s(e,t){const a=e.a/255,i=t+'="'+e.hex+'"';return a<1?i+" "+t+'-opacity="'+a.toFixed(2).slice(1)+'"':i}function o(e,t,a){let i=e+t;return typeof a<"u"&&(i+=" "+a),i}function n(e,t,a){let i="",l=0,p=!1,d=0;for(let u=0;u<e.length;u++){const g=Math.floor(u%t),h=Math.floor(u/t);!g&&!p&&(p=!0),e[u]?(d++,u>0&&g>0&&e[u-1]||(i+=p?o("M",g+a,.5+h+a):o("m",l,0),l=0,p=!1),g+1<t&&e[u+1]||(i+=o("h",d),d=0)):l++}return i}return Re.render=function(t,a,i){const l=r.getOptions(a),p=t.modules.size,d=t.modules.data,u=p+l.margin*2,g=l.color.light.a?"<path "+s(l.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",h="<path "+s(l.color.dark,"stroke")+' d="'+n(d,p,l.margin)+'"/>',E='viewBox="0 0 '+u+" "+u+'"',P='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+E+' shape-rendering="crispEdges">'+g+h+`</svg>
`;return typeof i=="function"&&i(null,P),P},Re}var ct;function Zt(){if(ct)return j;ct=1;const r=Mt(),s=Yt(),o=Gt(),n=Wt();function e(t,a,i,l,p){const d=[].slice.call(arguments,1),u=d.length,g=typeof d[u-1]=="function";if(!g&&!r())throw new Error("Callback required as last argument");if(g){if(u<2)throw new Error("Too few arguments provided");u===2?(p=i,i=a,a=l=void 0):u===3&&(a.getContext&&typeof p>"u"?(p=l,l=void 0):(p=l,l=i,i=a,a=void 0))}else{if(u<1)throw new Error("Too few arguments provided");return u===1?(i=a,a=l=void 0):u===2&&!a.getContext&&(l=i,i=a,a=void 0),new Promise(function(h,E){try{const N=s.create(i,l);h(t(N,a,l))}catch(N){E(N)}})}try{const h=s.create(i,l);p(null,t(h,a,l))}catch(h){p(h)}}return j.create=s.create,j.toCanvas=e.bind(null,o.render),j.toDataURL=e.bind(null,o.renderToDataURL),j.toString=e.bind(null,function(t,a,i){return n.render(t,i)}),j}var Xt=Zt();const mt=It(Xt),xt={key:0,class:"qr-pay-modal"},en={class:"modal-content"},tn={class:"modal-header"},nn={class:"modal-body"},rn={class:"qr-container"},on={key:0,class:"loading"},sn={class:"pay-info"},an={class:"amount"},ln={key:0,class:"status-checking"},un={__name:"WechatQRPayModal",props:{visible:{type:Boolean,default:!1},codeUrl:{type:String,default:""},amount:{type:[String,Number],default:0},orderId:{type:String,default:""}},emits:["close","success"],setup(r,{emit:s}){const o=r,n=s,e=U(null),t=U(!1),a=U(!1),i=async u=>{if(!(!u||!e.value)){t.value=!0;try{await mt.toCanvas(e.value,u,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}})}catch(g){console.error("生成二维码失败:",g)}finally{t.value=!1}}};Q(()=>o.codeUrl,async u=>{u&&o.visible&&(await x(),i(u))}),Q(()=>o.visible,async u=>{u&&o.codeUrl&&(await x(),i(o.codeUrl))});let l=null;const p=()=>{l||(console.log("🔄 开始轮询微信支付状态，订单号:",o.orderId),l=Me(async()=>{var u,g;a.value=!0;try{const h=await $fetch(`/api/wechat/pay/query/${o.orderId}`,{method:"GET",timeout:5e3});if(console.log("📊 查询支付状态响应:",h),h&&h.code===0&&h.data){const E=h.data;E.data&&E.data.trade_state==="SUCCESS"?(console.log("✅ 微信支付成功！"),console.log("📝 交易详情:",{订单号:E.data.out_trade_no,微信交易号:E.data.transaction_id,支付时间:E.data.success_time,支付金额:((u=E.data.amount)==null?void 0:u.total)/100+"元"}),n("success"),d()):E.trade_state==="SUCCESS"?(console.log("✅ 微信支付成功！"),n("success"),d()):(g=E.data)!=null&&g.trade_state&&console.log("⏳ 支付状态:",E.data.trade_state)}}catch(h){h.status!==404&&console.error("检查微信支付状态失败:",h)}finally{a.value=!1}},3e3))},d=()=>{l&&(clearInterval(l),l=null)};return Q(()=>o.visible,u=>{u?p():d()}),Pe(()=>{d()}),(u,g)=>r.visible?(k(),_("div",xt,[m("div",{class:"modal-overlay",onClick:g[0]||(g[0]=h=>u.$emit("close"))}),m("div",en,[m("div",tn,[g[2]||(g[2]=m("h3",null,"微信扫码支付",-1)),m("button",{class:"close-btn",onClick:g[1]||(g[1]=h=>u.$emit("close"))},"×")]),m("div",nn,[m("div",rn,[m("canvas",{ref_key:"qrCanvas",ref:e},null,512),t.value?(k(),_("div",on,"生成二维码中...")):$("",!0)]),m("div",sn,[m("p",an,[g[3]||(g[3]=X("支付金额：")),m("span",null,"￥"+F(r.amount),1)]),g[5]||(g[5]=m("p",{class:"tips"},"请使用微信扫描二维码完成支付",-1)),a.value?(k(),_("div",ln,g[4]||(g[4]=[m("span",{class:"checking-icon"},"⏳",-1),m("span",null,"正在检查支付状态...",-1)]))):$("",!0)]),g[6]||(g[6]=dt('<div class="pay-steps" data-v-0a66776b><div class="step" data-v-0a66776b><span class="step-num" data-v-0a66776b>1</span><span data-v-0a66776b>打开微信</span></div><div class="step" data-v-0a66776b><span class="step-num" data-v-0a66776b>2</span><span data-v-0a66776b>扫描二维码</span></div><div class="step" data-v-0a66776b><span class="step-num" data-v-0a66776b>3</span><span data-v-0a66776b>确认支付</span></div></div>',1))])])])):$("",!0)}},cn=Ne(un,[["__scopeId","data-v-0a66776b"]]),dn={key:0,class:"qr-pay-modal"},fn={class:"modal-content"},gn={class:"modal-header"},hn={class:"modal-body"},pn={class:"qr-container"},mn={class:"qr-wrapper"},yn={key:0,class:"loading"},vn={class:"pay-info"},wn={class:"amount"},Cn={class:"order-info"},En={__name:"AlipayQRPayModal",props:{visible:{type:Boolean,default:!1},payUrl:{type:String,default:""},amount:{type:[String,Number],default:0},orderId:{type:String,default:""}},emits:["close","success"],setup(r,{emit:s}){const o=r,n=s,e=U(null),t=U(!1),a=async d=>{if(!(!d||!e.value)){t.value=!0;try{let u=d;if(d.startsWith("data:image"))throw console.error("收到图片数据而非支付链接，无法生成二维码"),new Error("数据格式错误");console.log("生成支付宝二维码，内容:",u),await mt.toCanvas(e.value,u,{width:220,margin:2,color:{dark:"#1677ff",light:"#FFFFFF"},errorCorrectionLevel:"M"}),console.log("✅ 支付宝二维码生成成功")}catch(u){if(console.error("生成支付宝二维码失败:",u),e.value){const g=e.value.getContext("2d");g.clearRect(0,0,e.value.width,e.value.height),e.value.width=220,e.value.height=220,g.fillStyle="#f5f5f5",g.fillRect(0,0,220,220),g.fillStyle="#999",g.font="14px Arial",g.textAlign="center",g.fillText("二维码生成失败",110,100),g.fillText("请刷新重试",110,120)}}finally{t.value=!1}}};Q(()=>o.payUrl,async d=>{d&&o.visible&&(await x(),a(d))}),Q(()=>o.visible,async d=>{d&&o.payUrl&&(await x(),a(o.payUrl))});let i=null;const l=()=>{i||(i=Me(async()=>{try{const d=await $fetch(`/api/order/${o.orderId}`,{method:"GET"});if(d&&d.data){const u=d.data;(u.payment_status==="paid"||u.status==="paid"||u.paymentStatus===1||u.paymentStatus==="1")&&(console.log("✅ 支付宝支付成功，订单已支付"),n("success"),p())}}catch(d){console.error("检查支付宝支付状态失败:",d)}},3e3))},p=()=>{i&&(clearInterval(i),i=null)};return Q(()=>o.visible,d=>{d?l():p()}),Pe(()=>{p()}),(d,u)=>r.visible?(k(),_("div",dn,[m("div",{class:"modal-overlay",onClick:u[0]||(u[0]=g=>d.$emit("close"))}),m("div",fn,[m("div",gn,[u[2]||(u[2]=m("div",{class:"header-title"},[m("div",{class:"alipay-logo"},[m("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[m("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"#1677ff"})])]),m("h3",null,"支付宝扫码支付")],-1)),m("button",{class:"close-btn",onClick:u[1]||(u[1]=g=>d.$emit("close"))},"×")]),m("div",hn,[m("div",pn,[m("div",mn,[m("canvas",{ref_key:"qrCanvas",ref:e},null,512),t.value?(k(),_("div",yn,u[3]||(u[3]=[m("div",{class:"loading-spinner"},null,-1),m("span",null,"生成二维码中...",-1)]))):$("",!0)])]),m("div",vn,[m("p",wn,[u[4]||(u[4]=X("支付金额：")),m("span",null,"￥"+F(r.amount),1)]),m("p",Cn,"订单号："+F(r.orderId),1),u[5]||(u[5]=m("p",{class:"tips"},"请使用支付宝扫描二维码完成支付",-1))]),u[6]||(u[6]=dt('<div class="pay-steps" data-v-83bfae48><div class="step" data-v-83bfae48><span class="step-num" data-v-83bfae48>1</span><span data-v-83bfae48>打开支付宝</span></div><div class="step" data-v-83bfae48><span class="step-num" data-v-83bfae48>2</span><span data-v-83bfae48>扫描二维码</span></div><div class="step" data-v-83bfae48><span class="step-num" data-v-83bfae48>3</span><span data-v-83bfae48>确认支付</span></div></div><div class="security-tip" data-v-83bfae48><svg width="16" height="16" viewBox="0 0 16 16" fill="#1677ff" data-v-83bfae48><path d="M8 0C3.6 0 0 3.6 0 8s3.6 8 8 8 8-3.6 8-8S12.4 0 8 0zm1 12H7V7h2v5zm0-6H7V4h2v2z" data-v-83bfae48></path></svg><span data-v-83bfae48>支付宝安全保障，请放心支付</span></div>',2))])])])):$("",!0)}},bn=Ne(En,[["__scopeId","data-v-83bfae48"]]),Ae={getPaymentUrl(r){return r.payType==="2"?(console.log("📤 微信支付请求参数:",{orderNo:r.orderId,amount:Number(r.amount),description:"商品购买",payType:"native"}),O.post("/wechat/pay/create",{orderNo:r.orderId,amount:Number(r.amount),description:"商品购买",payType:"native"})):r.payType==="4"?O.post("/payment/alipay/create",{orderNo:r.orderId,amount:Number(r.amount),subject:"商品购买"}):r.payType==="3"?O.post("/binance/pay/create",{orderNo:r.orderId,amount:Number(r.amount),currency:"USDT",description:"商品购买"}):Promise.resolve({code:-1,msg:"不支持的支付方式",success:!1,data:null})},paymentCallback(r,s,o){return O.post(`/product/pay/${r}/callback`,o,{params:s})},getPaymentSuccessUrl(r){return O.get(`/product/order/success/${r}`)},getPaymentConfig(r,s){return O.get(`/product/pay/config/${r}`,s)},checkPaymentStatus(r){return Promise.resolve({code:0,msg:"success",success:!0,data:{status:"pending",paid:!1}})}},In={class:"modal-mask"},Sn={class:"order-pay-modal"},Bn={class:"modal-header"},Tn={class:"modal-content"},Rn={class:"order-info-bar"},An=["src"],Nn={class:"shop-info"},Pn={class:"shop-name"},Mn={class:"shop-desc"},Un={class:"order-id"},kn={class:"order-amount"},_n={class:"pay-section"},Ln={class:"pay-methods"},qn={key:0,class:"pay-checked"},Dn={key:0,class:"pay-checked"},Fn={key:0,class:"pay-checked"},$n={class:"pay-bottom"},zn=["disabled"],Vn={key:0},Hn={key:1},Kn={class:"pay-countdown"},Jn={class:"countdown"},On=St({__name:"OrderPayModal",props:{shopLogo:{type:String,default:"/images/shop-logo.png"},shopName:{type:String,default:"某旗舰店"},shopDesc:{type:String,default:""},orderId:{type:String,default:""},price:{type:[String,Number],default:""},countdown:{type:Number,default:900}},emits:["close","timeout","paySuccess"],setup(r,{emit:s}){const o=r,n=s;Bt();const e=U("wechat"),t=U(o.countdown),a=U(!1),i=U(!1),l=U(!1),p=U(""),d=U(!1),u=U(""),g=Tt(()=>{const R=String(Math.floor(t.value/60)).padStart(2,"0"),f=String(t.value%60).padStart(2,"0");return`${R}:${f}`});let h=null;Rt(()=>{h=Me(()=>{t.value>0?t.value--:(clearInterval(h),n("timeout"))},1e3)}),Pe(()=>{h&&clearInterval(h)});async function E(){var R,f,C,M,v,I,b,y;if(!i.value){i.value=!0,console.log("🚀 开始支付流程"),console.log("💳 支付方式:",e.value),console.log("💰 支付金额:",o.price),console.log("📝 订单ID:",o.orderId);try{if(e.value==="wechat"){console.log("💚 调用微信支付...");const c=await Ae.getPaymentUrl({orderId:o.orderId,payType:"2",amount:o.price});if(console.log("微信支付响应:",c),c.success&&c.data)if(c.data.codeUrl){console.log("📱 显示微信支付二维码:",c.data.codeUrl),p.value=c.data.codeUrl,l.value=!0,i.value=!1;return}else if(c.data.payUrl){console.log("🌐 跳转到微信H5支付"),window.location.href=c.data.payUrl;return}else throw new Error("支付响应格式错误");else throw new Error(c.msg||"获取微信支付链接失败")}else if(e.value==="alipay"){console.log("💙 调用支付宝支付..."),console.log("📝 请求参数:",{orderId:o.orderId,payType:"4",amount:o.price});const c=await Ae.getPaymentUrl({orderId:o.orderId,payType:"4",amount:o.price});if(console.log("📥 支付宝API响应:",c),console.log("📥 response.data 类型:",typeof c.data),console.log("📥 response.data 内容:",c.data),c.success&&c.data)if(typeof c.data=="string"){console.log("📱 获取到支付链接，显示二维码弹窗:",c.data),u.value=c.data,d.value=!0,i.value=!1;return}else if(typeof c.data=="object")if(console.log("📦 响应数据是对象，尝试提取URL"),c.data.qrCode){console.log("📱 获取到二维码内容:",c.data.qrCode),u.value=c.data.qrCode,d.value=!0,i.value=!1;return}else if(c.data.payUrl){console.log("📱 获取到支付链接，生成二维码:",c.data.payUrl),u.value=c.data.payUrl,d.value=!0,i.value=!1;return}else if(c.data.codeUrl){console.log("📱 获取到codeUrl:",c.data.codeUrl),u.value=c.data.codeUrl,d.value=!0,i.value=!1;return}else if(c.data.url){console.log("📱 获取到url:",c.data.url),u.value=c.data.url,d.value=!0,i.value=!1;return}else throw console.error("❌ 响应对象中没有找到支付链接:",c.data),new Error("响应中未找到支付链接");else throw console.error("❌ 未知的响应数据类型:",typeof c.data),new Error("响应数据格式错误");else throw console.error("❌ API响应失败:",c),new Error(c.msg||"获取支付链接失败")}else if(e.value==="binance"){console.log("💰 使用币安支付...");const c=await Ae.getPaymentUrl({orderId:o.orderId,payType:"3",amount:o.price});if(c.success&&c.data){window.location.href=c.data;return}else throw new Error(c.msg||"获取币安支付链接失败")}else throw console.log("🔧 不支持的支付方式"),new Error("请选择支付方式");console.log("🎉 支付完成，准备显示成功弹窗..."),i.value=!1,console.log("📱 设置showSuccessModal为true"),a.value=!0,console.log("📱 showSuccessModal当前值:",a.value);const w={orderId:o.orderId||"DEFAULT_ORDER",payType:e.value,amount:o.price||0};console.log("📤 触发支付成功事件:",w),n("paySuccess",w),setTimeout(()=>{console.log("⏰ 1秒后检查弹窗状态:",a.value)},1e3)}catch(w){console.error("❌ 支付失败:",w),console.error("❌ 错误详情:",{message:w.message,response:w.response,stack:w.stack});const c=((f=(R=w.response)==null?void 0:R.data)==null?void 0:f.msg)||((M=(C=w.response)==null?void 0:C.data)==null?void 0:M.message)||((y=(b=(I=(v=w.response)==null?void 0:v.data)==null?void 0:I.errors)==null?void 0:b[0])==null?void 0:y.msg)||w.message||"支付失败，请重试";alert(c),i.value=!1}}}function N(){a.value=!1,n("close")}function P(){l.value=!1,a.value=!0,n("paySuccess",{orderId:o.orderId,payType:"wechat",amount:o.price})}function T(){d.value=!1,a.value=!0,n("paySuccess",{orderId:o.orderId,payType:"alipay",amount:o.price})}return(R,f)=>(k(),_("div",In,[m("div",Sn,[m("div",Bn,[f[6]||(f[6]=m("div",{class:"modal-title"},"订单支付",-1)),f[7]||(f[7]=m("div",{class:"modal-subtitle"},"请选择支付方式完成付款",-1)),m("button",{class:"modal-close",onClick:f[0]||(f[0]=C=>R.$emit("close"))},"×")]),m("div",Tn,[m("div",Rn,[m("img",{class:"shop-logo",src:r.shopLogo,alt:"logo"},null,8,An),m("div",Nn,[m("div",Pn,F(r.shopName),1),m("div",Mn,F(r.shopDesc),1),m("div",Un,"订单号：#"+F(r.orderId),1)]),m("div",kn,"￥"+F(r.price),1)]),m("div",_n,[f[17]||(f[17]=m("div",{class:"pay-title"},"选择支付方式",-1)),m("div",Ln,[m("div",{class:oe(["pay-method",e.value==="wechat"?"active":""]),onClick:f[1]||(f[1]=C=>e.value="wechat")},[f[8]||(f[8]=m("img",{class:"pay-icon",src:Ct,alt:"微信支付"},null,-1)),f[9]||(f[9]=m("div",{class:"pay-label"},"微信支付",-1)),f[10]||(f[10]=m("div",{class:"pay-desc"},"推荐微信用户使用",-1)),e.value==="wechat"?(k(),_("div",qn)):$("",!0)],2),m("div",{class:oe(["pay-method",e.value==="alipay"?"active":""]),onClick:f[2]||(f[2]=C=>e.value="alipay")},[f[11]||(f[11]=m("img",{class:"pay-icon",src:Et,alt:"支付宝"},null,-1)),f[12]||(f[12]=m("div",{class:"pay-label"},"支付宝支付",-1)),f[13]||(f[13]=m("div",{class:"pay-desc"},"推荐已安装支付宝的用户使用",-1)),e.value==="alipay"?(k(),_("div",Dn)):$("",!0)],2),m("div",{class:oe(["pay-method",e.value==="binance"?"active":""]),onClick:f[3]||(f[3]=C=>e.value="binance")},[f[14]||(f[14]=m("img",{class:"pay-icon",src:Pt,alt:"币安支付"},null,-1)),f[15]||(f[15]=m("div",{class:"pay-label"},"币安支付",-1)),f[16]||(f[16]=m("div",{class:"pay-desc"},"支持USDT等加密货币支付",-1)),e.value==="binance"?(k(),_("div",Fn)):$("",!0)],2)])]),m("div",$n,[m("button",{class:"btn-pay",onClick:E,disabled:i.value},[i.value?(k(),_("span",Hn,"支付中...")):(k(),_("span",Vn,"确认支付￥"+F(r.price),1))],8,zn),m("div",Kn,[f[18]||(f[18]=X(" 支付剩余时间：")),m("span",Jn,F(g.value),1)]),f[19]||(f[19]=m("div",{class:"pay-tip"},[X(" 点击支付即表示您已同意 "),m("a",{href:"#",class:"pay-link"},"《支付服务协议》")],-1))])])]),a.value?(k(),At(Nt,{key:0,orderId:o.orderId||"DEFAULT_ORDER",payType:e.value,amount:o.price||0,onClose:N},null,8,["orderId","payType","amount"])):$("",!0),qe(cn,{visible:l.value,codeUrl:p.value,amount:o.price,orderId:o.orderId,onClose:f[4]||(f[4]=C=>l.value=!1),onSuccess:P},null,8,["visible","codeUrl","amount","orderId"]),qe(bn,{visible:d.value,payUrl:u.value,amount:o.price,orderId:o.orderId,onClose:f[5]||(f[5]=C=>d.value=!1),onSuccess:T},null,8,["visible","payUrl","amount","orderId"])]))}}),Wn=Ne(On,[["__scopeId","data-v-7c6ae04d"]]);export{Wn as O};
