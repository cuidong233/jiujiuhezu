import{f as B,r as v,h as n,g as I,c as r,K as P,H as A,a as e,i as D,t as l,d as m,M as y,o as i,_ as H}from"./EcDhdyxl.js";import{R as V}from"./C0puMdAJ.js";const G={key:1,class:"pay-success-modal"},O={class:"success-header"},j={class:"success-desc"},E={class:"success-info"},K={class:"info-row"},Y={class:"info-value info-link"},q={class:"info-row"},z={class:"info-value info-amount"},J={class:"info-row"},L={class:"info-value info-paytype"},Q={class:"info-row"},U={class:"info-value info-time"},W={class:"success-actions"},X=B({__name:"PaySuccessModal",props:{orderId:{type:String,default:"N/A"},payType:{type:String,default:"balance"},amount:{type:[String,Number],default:0},productName:{type:String,default:""},productType:{type:String,default:""}},emits:["close"],setup(f,{emit:g}){const t=f,c=g,a=v(!1),d=v(!1),u=n(()=>{var o,s;return t.productType==="recharge"||((o=t.productName)==null?void 0:o.includes("代充"))||((s=t.productName)==null?void 0:s.includes("充值"))});I(()=>{u.value&&!d.value&&setTimeout(()=>{a.value=!0},1500)});const p=n(()=>t.orderId||"N/A"),S=n(()=>{try{const o=typeof t.amount=="string"?parseFloat(t.amount||"0"):t.amount||0;return isNaN(o)?"0.00":o.toFixed(2)}catch{return"0.00"}}),h=n(()=>({alipay:"支付宝支付",balance:"余额支付",other:"其他支付"})[t.payType]||"未知支付方式"),k=n(()=>{try{const o=new Date,s=o.getFullYear(),C=String(o.getMonth()+1).padStart(2,"0"),x=String(o.getDate()).padStart(2,"0"),R=String(o.getHours()).padStart(2,"0"),F=String(o.getMinutes()).padStart(2,"0"),$=String(o.getSeconds()).padStart(2,"0");return`${s}-${C}-${x} ${R}:${F}:${$}`}catch{return"获取时间失败"}}),N=()=>{a.value||c("close")},w=()=>{console.log("点击返回首页"),c("close");try{y("/")}catch(o){console.error("跳转首页失败:",o),window.location.href="/"}},b=()=>{console.log("点击查看订单"),c("close");try{y("/profile/orders")}catch(o){console.error("跳转订单页失败:",o),window.location.href="/profile/orders"}},_=()=>{a.value=!0},M=()=>{a.value=!1},T=()=>{d.value=!0,a.value=!1};return(o,s)=>(i(),r("div",{class:"modal-mask",onClick:P(N,["self"])},[a.value?(i(),A(V,{key:0,orderNo:p.value,productName:f.productName,onClose:M,onSuccess:T},null,8,["orderNo","productName"])):(i(),r("div",G,[e("div",O,[s[0]||(s[0]=D('<div class="success-circle" data-v-704f18f0><svg width="80" height="80" viewBox="0 0 96 96" fill="none" data-v-704f18f0><circle cx="48" cy="48" r="48" fill="#fff" data-v-704f18f0></circle><path d="M30 50l14 14 22-28" stroke="#2196F3" stroke-width="7" stroke-linecap="round" stroke-linejoin="round" data-v-704f18f0></path></svg></div><div class="success-title" data-v-704f18f0>支付成功！</div>',2)),e("div",j,l(u.value?"请填写回执信息以完成订单":"感谢您的购买，订单已处理完成"),1)]),e("div",E,[e("div",K,[s[1]||(s[1]=e("span",{class:"info-label"},"订单编号",-1)),e("span",Y,"#"+l(p.value),1)]),s[5]||(s[5]=e("div",{class:"info-divider"},null,-1)),e("div",q,[s[2]||(s[2]=e("span",{class:"info-label"},"支付金额",-1)),e("span",z,"￥"+l(S.value),1)]),s[6]||(s[6]=e("div",{class:"info-divider"},null,-1)),e("div",J,[s[3]||(s[3]=e("span",{class:"info-label"},"支付方式",-1)),e("span",L,l(h.value),1)]),s[7]||(s[7]=e("div",{class:"info-divider"},null,-1)),e("div",Q,[s[4]||(s[4]=e("span",{class:"info-label"},"支付时间",-1)),e("span",U,l(k.value),1)]),s[8]||(s[8]=e("div",{class:"info-divider"},null,-1)),s[9]||(s[9]=e("div",{class:"info-row"},[e("span",{class:"info-label"},"订单状态"),e("span",{class:"info-value info-status"},"已支付，商品信息已发送邮箱")],-1))]),e("div",W,[u.value&&!d.value?(i(),r("button",{key:0,class:"order-btn",onClick:_}," 填写回执单 ")):(i(),r("button",{key:1,class:"order-btn",onClick:b}," 前往查看订单 ")),e("button",{class:"home-btn",onClick:w}," 返回首页 ")]),s[10]||(s[10]=e("div",{class:"success-tip"},[m(" 📧 订单详情和商品信息已发送到您的邮箱，请注意查收 "),e("br"),m("如有任何问题，请联系客服 "),e("span",{class:"kefu-phone"},"400-123-4567")],-1))]))]))}}),es=H(X,[["__scopeId","data-v-704f18f0"]]);export{es as P};
